Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog Z8 Encore! ANSI C Compiler Release 3.62
                           A     2    ; -nolocalcse -optsize -nofastcall -const=RAM -
                           A     3    ; -nooptlink -regvar -reduceopt -debug -norevaa
                           A     4    ; -alias 
                           A     5    	DEFINE main_TEXT,SPACE=ROM
                           A     6    	FILE	"..\..\..\..\DOCUME~1\GITHUB\THIRDY
                           A     7    .debug "C"
                           A     8    	SEGMENT FAR_DATA
000000                     A     9    _RELOAD:
000000 03E8                A    10    	DW	1000
                           A    11    .define "RELOAD"
                           A    12    .alias "_RELOAD"
                           A    13    .class 69
                           A    14    .value _RELOAD
                           A    15    .type 3
                           A    16    .type 0
                           A    17    .endef
                           A    18    	SEGMENT main_TEXT
                           A    19    .begrec "fmt_type",16
                           A    20    .define "status"
                           A    21    .value 0
                           A    22    .class 8
                           A    23    .type 12
                           A    24    .type 0
                           A    25    .endef
                           A    26    .define "flags"
                           A    27    .value 1
                           A    28    .class 8
                           A    29    .type 12
                           A    30    .type 0
                           A    31    .endef
                           A    32    .define "size"
                           A    33    .value 2
                           A    34    .class 8
                           A    35    .type 2
                           A    36    .type 0
                           A    37    .endef
                           A    38    .define "chr"
                           A    39    .value 3
                           A    40    .class 8
                           A    41    .type 2
                           A    42    .type 0
                           A    43    .endef
                           A    44    .define "type"
                           A    45    .value 4
                           A    46    .class 8
                           A    47    .type 2
                           A    48    .type 0
                           A    49    .endef
                           A    50    .define "field_width"
                           A    51    .value 5
                           A    52    .class 8
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   2


PC     Object              I  Line    Source main.src
                           A    53    .type 2
                           A    54    .type 0
                           A    55    .endef
                           A    56    .define "precision"
                           A    57    .value 6
                           A    58    .class 8
                           A    59    .type 2
                           A    60    .type 0
                           A    61    .endef
                           A    62    .define "set_begin"
                           A    63    .value 7
                           A    64    .class 8
                           A    65    .type 162
                           A    66    .type 0
                           A    67    .endef
                           A    68    .define "set_end"
                           A    69    .value 9
                           A    70    .class 8
                           A    71    .type 162
                           A    72    .type 0
                           A    73    .endef
                           A    74    .define "pad_whole"
                           A    75    .value 11
                           A    76    .class 8
                           A    77    .type 12
                           A    78    .type 0
                           A    79    .endef
                           A    80    .define "pad_pre_fract"
                           A    81    .value 12
                           A    82    .class 8
                           A    83    .type 12
                           A    84    .type 0
                           A    85    .endef
                           A    86    .define "pad_post_fract"
                           A    87    .value 13
                           A    88    .class 8
                           A    89    .type 12
                           A    90    .type 0
                           A    91    .endef
                           A    92    .define "pad_at"
                           A    93    .value 14
                           A    94    .class 8
                           A    95    .type 162
                           A    96    .type 0
                           A    97    .endef
                           A    98    .endrec "fmt_type"
                           A    99    .begrec "flt_info",12
                           A   100    .define "flags"
                           A   101    .value 0
                           A   102    .class 8
                           A   103    .type 12
                           A   104    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   3


PC     Object              I  Line    Source main.src
                           A   105    .endef
                           A   106    .define "exp"
                           A   107    .value 1
                           A   108    .class 8
                           A   109    .type 2
                           A   110    .type 0
                           A   111    .endef
                           A   112    .define "digits"
                           A   113    .value 2
                           A   114    .class 8
                           A   115    .dim 10
                           A   116    .type 108
                           A   117    .type 0
                           A   118    .endef
                           A   119    .endrec "flt_info"
                           A   120    	SEGMENT FAR_DATA
000002                     A   121    _inChar:
000002 00                  A   122    	DB	0
                           A   123    .define "inChar"
                           A   124    .alias "_inChar"
                           A   125    .class 69
                           A   126    .value _inChar
                           A   127    .type 2
                           A   128    .type 0
                           A   129    .endef
                           A   130    	SEGMENT FAR_BSS
000000                     A   131    _string:
000000                     A   132    	DS	25
                           A   133    .define "string"
                           A   134    .alias "_string"
                           A   135    .class 83
                           A   136    .value _string
                           A   137    .dim 25
                           A   138    .type 98
                           A   139    .type 0
                           A   140    .endef
                           A   141    	SEGMENT FAR_DATA
000003                     A   142    _txFinished:
000003 01                  A   143    	DB	1
                           A   144    .define "txFinished"
                           A   145    .alias "_txFinished"
                           A   146    .class 69
                           A   147    .value _txFinished
                           A   148    .type 2
                           A   149    .type 0
                           A   150    .endef
000004                     A   151    _command:
000004 00                  A   152    	DB	0
                           A   153    .define "command"
                           A   154    .alias "_command"
                           A   155    .class 69
                           A   156    .value _command
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   4


PC     Object              I  Line    Source main.src
                           A   157    .type 2
                           A   158    .type 0
                           A   159    .endef
000005                     A   160    _rxFlag:
000005 00                  A   161    	DB	0
                           A   162    .define "rxFlag"
                           A   163    .alias "_rxFlag"
                           A   164    .class 69
                           A   165    .value _rxFlag
                           A   166    .type 2
                           A   167    .type 0
                           A   168    .endef
                           A   169    	SEGMENT FAR_BSS
000019                     A   170    _gyroRead:
000019                     A   171    	DS	6
                           A   172    .define "gyroRead"
                           A   173    .alias "_gyroRead"
                           A   174    .class 83
                           A   175    .value _gyroRead
                           A   176    .dim 6
                           A   177    .type 98
                           A   178    .type 0
                           A   179    .endef
00001F                     A   180    _accRead:
00001F                     A   181    	DS	6
                           A   182    .define "accRead"
                           A   183    .alias "_accRead"
                           A   184    .class 83
                           A   185    .value _accRead
                           A   186    .dim 6
                           A   187    .type 98
                           A   188    .type 0
                           A   189    .endef
000025                     A   190    _acc_xh:
000025                     A   191    	DS	1
                           A   192    .define "acc_xh"
                           A   193    .alias "_acc_xh"
                           A   194    .class 83
                           A   195    .value _acc_xh
                           A   196    .type 2
                           A   197    .type 0
                           A   198    .endef
000026                     A   199    _acc_xl:
000026                     A   200    	DS	1
                           A   201    .define "acc_xl"
                           A   202    .alias "_acc_xl"
                           A   203    .class 83
                           A   204    .value _acc_xl
                           A   205    .type 2
                           A   206    .type 0
                           A   207    .endef
000027                     A   208    _acc_yh:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   5


PC     Object              I  Line    Source main.src
000027                     A   209    	DS	1
                           A   210    .define "acc_yh"
                           A   211    .alias "_acc_yh"
                           A   212    .class 83
                           A   213    .value _acc_yh
                           A   214    .type 2
                           A   215    .type 0
                           A   216    .endef
000028                     A   217    _acc_yl:
000028                     A   218    	DS	1
                           A   219    .define "acc_yl"
                           A   220    .alias "_acc_yl"
                           A   221    .class 83
                           A   222    .value _acc_yl
                           A   223    .type 2
                           A   224    .type 0
                           A   225    .endef
000029                     A   226    _acc_y:
000029                     A   227    	DS	1
                           A   228    .define "acc_y"
                           A   229    .alias "_acc_y"
                           A   230    .class 83
                           A   231    .value _acc_y
                           A   232    .type 2
                           A   233    .type 0
                           A   234    .endef
00002A                     A   235    _acc_x:
00002A                     A   236    	DS	1
                           A   237    .define "acc_x"
                           A   238    .alias "_acc_x"
                           A   239    .class 83
                           A   240    .value _acc_x
                           A   241    .type 2
                           A   242    .type 0
                           A   243    .endef
00002B                     A   244    _gyro_h:
00002B                     A   245    	DS	1
                           A   246    .define "gyro_h"
                           A   247    .alias "_gyro_h"
                           A   248    .class 83
                           A   249    .value _gyro_h
                           A   250    .type 2
                           A   251    .type 0
                           A   252    .endef
00002C                     A   253    _gyro_l:
00002C                     A   254    	DS	1
                           A   255    .define "gyro_l"
                           A   256    .alias "_gyro_l"
                           A   257    .class 83
                           A   258    .value _gyro_l
                           A   259    .type 2
                           A   260    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   6


PC     Object              I  Line    Source main.src
                           A   261    .endef
00002D                     A   262    _gyro_val:
00002D                     A   263    	DS	2*1
                           A   264    .define "gyro_val"
                           A   265    .alias "_gyro_val"
                           A   266    .class 83
                           A   267    .value _gyro_val
                           A   268    .type 3
                           A   269    .type 0
                           A   270    .endef
00002F                     A   271    _accXValue:
00002F                     A   272    	DS	2*1
                           A   273    .define "accXValue"
                           A   274    .alias "_accXValue"
                           A   275    .class 83
                           A   276    .value _accXValue
                           A   277    .type 3
                           A   278    .type 0
                           A   279    .endef
000031                     A   280    _accYValue:
000031                     A   281    	DS	2*1
                           A   282    .define "accYValue"
                           A   283    .alias "_accYValue"
                           A   284    .class 83
                           A   285    .value _accYValue
                           A   286    .type 3
                           A   287    .type 0
                           A   288    .endef
000033                     A   289    _accZValue:
000033                     A   290    	DS	2*1
                           A   291    .define "accZValue"
                           A   292    .alias "_accZValue"
                           A   293    .class 83
                           A   294    .value _accZValue
                           A   295    .type 3
                           A   296    .type 0
                           A   297    .endef
000035                     A   298    _gyroXValue:
000035                     A   299    	DS	2*1
                           A   300    .define "gyroXValue"
                           A   301    .alias "_gyroXValue"
                           A   302    .class 83
                           A   303    .value _gyroXValue
                           A   304    .type 3
                           A   305    .type 0
                           A   306    .endef
000037                     A   307    _gyroYValue:
000037                     A   308    	DS	2*1
                           A   309    .define "gyroYValue"
                           A   310    .alias "_gyroYValue"
                           A   311    .class 83
                           A   312    .value _gyroYValue
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   7


PC     Object              I  Line    Source main.src
                           A   313    .type 3
                           A   314    .type 0
                           A   315    .endef
000039                     A   316    _gyroZValue:
000039                     A   317    	DS	2*1
                           A   318    .define "gyroZValue"
                           A   319    .alias "_gyroZValue"
                           A   320    .class 83
                           A   321    .value _gyroZValue
                           A   322    .type 3
                           A   323    .type 0
                           A   324    .endef
00003B                     A   325    _t1Ready:
00003B                     A   326    	DS	1
                           A   327    .define "t1Ready"
                           A   328    .alias "_t1Ready"
                           A   329    .class 83
                           A   330    .value _t1Ready
                           A   331    .type 2
                           A   332    .type 0
                           A   333    .endef
                           A   334    	SEGMENT FAR_DATA
000006                     A   335    _speed:
000006 0000                A   336    	DW	0
                           A   337    .define "speed"
                           A   338    .alias "_speed"
                           A   339    .class 69
                           A   340    .value _speed
                           A   341    .type 3
                           A   342    .type 0
                           A   343    .endef
000008                     A   344    _printI2Cq:
000008 00                  A   345    	DB	0
                           A   346    .define "printI2Cq"
                           A   347    .alias "_printI2Cq"
                           A   348    .class 69
                           A   349    .value _printI2Cq
                           A   350    .type 2
                           A   351    .type 0
                           A   352    .endef
                           A   353    	SEGMENT ROM_DATA
                           A   354    
                           A   355    
                           A   356    ;**************************** _main ***********
                           A   357    ;Name                         Addr/Register   S
                           A   358    ;_mode                               IMPORT  --
                           A   359    ;_motorsSet                          IMPORT  --
                           A   360    ;_speed                              STATIC    
                           A   361    ;___print_sputch                     IMPORT  --
                           A   362    ;___print_send                       IMPORT  --
                           A   363    ;___print_buff                       IMPORT  un
                           A   364    ;___print_putromstring               IMPORT  --
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   8


PC     Object              I  Line    Source main.src
                           A   365    ;___print_out                        IMPORT    
                           A   366    ;_commandF                           IMPORT  --
                           A   367    ;_command                            STATIC    
                           A   368    ;_rxFlag                             STATIC    
                           A   369    ;_sendString                         IMPORT  --
                           A   370    ;_EI                                 IMPORT  --
                           A   371    ;_motorInit                          IMPORT  --
                           A   372    ;_init_coms                          IMPORT  --
                           A   373    ;_signon                             IMPORT  --
                           A   374    ;_init_LCD                           IMPORT  --
                           A   375    ;_i2cInit                            IMPORT  --
                           A   376    ;inChar                              R15-25    
                           A   377    ;tmp                            <optimized>    
                           A   378    ;i                                      RR4    
                           A   379    
                           A   380    
                           A   381    ; Aggregate Stack Size: -27 (words)
                           A   382    
                           A   383    
                           A   384    	.FRAME _n_main,?_n_main,RDATA
                           A   385    	.FCALL _n_i2cInit
                           A   386    	.FCALL _n_init_LCD
                           A   387    	.FCALL _n_signon
                           A   388    	.FCALL _n_init_coms
                           A   389    	.FCALL _n_motorInit
                           A   390    	.FCALL _n_sendString
                           A   391    	.FCALL _n_commandF
                           A   392    	.FCALL _n___print_putromstring
                           A   393    	.FCALL _n___print_send
                           A   394    	.FCALL _n___print_sputch
                           A   395    	.FCALL _n_motorsSet
                           A   396    	.FCALL _n_mode
                           A   397    	.FRAME _f_main,?_f_main,EDATA
                           A   398    	.FCALL _f_i2cInit
                           A   399    	.FCALL _f_init_LCD
                           A   400    	.FCALL _f_signon
                           A   401    	.FCALL _f_init_coms
                           A   402    	.FCALL _f_motorInit
                           A   403    	.FCALL _f_sendString
                           A   404    	.FCALL _f_commandF
                           A   405    	.FCALL _f___print_putromstring
                           A   406    	.FCALL _f___print_send
                           A   407    	.FCALL _f___print_sputch
                           A   408    	.FCALL _f_motorsSet
                           A   409    	.FCALL _f_mode
                           A   410    	SEGMENT TEXT
000000                     A   411    L__0:
000000 41542B4E 414D4572   A   412    	DB	"AT+NAMErJordan"
000008 4A6F7264 616E 
00000E 00                  A   413    	DB	0
                           A   414    	SEGMENT ROM_TEXT
000000                     A   415    L__2:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:   9


PC     Object              I  Line    Source main.src
000000 436F6D6D 616E643A   A   416    	DB	"Command: "
000008 20 
000009 00                  A   417    	DB	0
00000A                     A   418    L__3:
00000A 20                  A   419    	DB	" "
00000B 0D0A00              A   420    	DB	13,10,0
                           A   421    	SEGMENT main_TEXT
000000                     A   422    _main:
                           A   423    .define "_main"
                           A   424    .value _main
                           A   425    .class 2
                           A   426    .type 65
                           A   427    .type 0
                           A   428    .endef
                           A   429    .begfunc "main",11,"_main"
                           A   430    ;    1	#include <ez8.h>
                           A   431    ;    2	#include <delay.h>
                           A   432    ;    3	#include <STRING.H>
                           A   433    ;    4	#include <LCD.H>
                           A   434    ;    5	#include <STDIO.H>
                           A   435    ;    6	#include <motor.h>
                           A   436    ;    7	#include <uart.h>
                           A   437    ;    8	#include <i2c.h>
                           A   438    ;    9	#include <main.h>
                           A   439    ;   10	
                           A   440    ;   11	void main(void){
                           A   441    .define "U‹ìjÿh0/J"
                           A   442    .class 4
                           A   443    .reg 19
                           A   444    .type 3
                           A   445    .type 0
                           A   446    .endef
                           A   447    .define "U‹ìjÿh0/J"
                           A   448    .class 4
                           A   449    .reg -1
                           A   450    .type 2
                           A   451    .type 0
                           A   452    .endef
                           A   453    .define "inChar"
                           A   454    .class 1
                           A   455    .value -25
                           A   456    .dim 25
                           A   457    .type 98
                           A   458    .type 0
                           A   459    .endef
000000 5C1B                A   460    	LD	R5,#27
000002 D6 0000             A   461    	CALL	__b_frameset0
                           A   462    ;   12		char reser[];
                           A   463    ;   13		char test[5];
                           A   464    ;   14		char inChar[25];
                           A   465    ;   15		char tmp;
                           A   466    ;   16	
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  10


PC     Object              I  Line    Source main.src
                           A   467    ;   17		int i = 0;
                           A   468    .line 17
000005 B0E4                A   469    	CLR	R4
000007 B0E5                A   470    	CLR	R5
                           A   471    ;   18	// 	init_IO();
                           A   472    ;   19		i2cInit();
                           A   473    .line 19
000009 89E4E6              A   474    	LDX	-26(RR14),R4
00000C 89E5E5              A   475    	LDX	-27(RR14),R5
00000F D6 0000             A   476    	CALL	_i2cInit
                           A   477    ;   20		init_LCD();
                           A   478    .line 20
000012 D6 0000             A   479    	CALL	_init_LCD
                           A   480    ;   21		signon();
                           A   481    .line 21
000015 D6 0000             A   482    	CALL	_signon
                           A   483    ;   22	// 	printMessage("This is a test", 1);
                           A   484    ;   23		init_coms();
                           A   485    .line 23
000018 D6 0000             A   486    	CALL	_init_coms
                           A   487    ;   24	// printMessage("This is a test02", 1);
                           A   488    ;   25		motorInit();
                           A   489    .line 25
00001B D6 0000             A   490    	CALL	_motorInit
                           A   491    ;   26	// 	printMessage("This is a test03", 1)
                           A   492    ;   27		EI();
                           A   493    .line 27
00001E 9F                  A   494    	EI
                           A   495    ;   28		sendString("AT+NAMErJordan");
                           A   496    .line 28
00001F 1F70 00             A   497    	PUSH	#low(L__0)
000022 1F70 00             A   498    	PUSH	#high(L__0)
000025 D6 0000             A   499    	CALL	_sendString
000028 885EE5              A   500    	LDX	R5,-27(RR14)
00002B 884EE6              A   501    	LDX	R4,-26(RR14)
00002E 50E0                A   502    	POP	R0
000030 50E0                A   503    	POP	R0
                           A   504    ;   29	// 	printMessage("This is a test04", 1)
                           A   505    ;   30		rxFlag = 0;
                           A   506    .line 30
000032 E9000005            A   507    	LDX	_rxFlag,#-0
                           A   508    ;   31		command = 0;
                           A   509    .line 31
000036 E9000004            A   510    	LDX	_command,#-0
                           A   511    ;   32	
                           A   512    ;   33	// 	sendString("got here");
                           A   513    ;   34	
                           A   514    ;   35	// 	printMessage("This is a test05", 1)
                           A   515    ;   36	
                           A   516    ;   37		while(1){
00003A                     A   517    _1_L_10:
                           A   518    .line 37
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  11


PC     Object              I  Line    Source main.src
                           A   519    ;   38			i++;
                           A   520    .line 38
00003A A0E4                A   521    	INCW	RR4
                           A   522    ;   39			// speed = (float) accXValueF()
                           A   523    ;   40			// motorsSet(speed, 0, loffset,
                           A   524    ;   41	// 		mems_read();
                           A   525    ;   42	// 		dly(50);
                           A   526    ;   43	//
                           A   527    ;   44			//
                           A   528    ;   45			command = commandF();
                           A   529    .line 45
00003C 89E4E6              A   530    	LDX	-26(RR14),R4
00003F 89E5E5              A   531    	LDX	-27(RR14),R5
000042 D6 0000             A   532    	CALL	_commandF
000045 885EE5              A   533    	LDX	R5,-27(RR14)
000048 884EE6              A   534    	LDX	R4,-26(RR14)
00004B 940004              A   535    	LDX	_command,R0
                           A   536    ;   46			if(command != 0){
                           A   537    .line 46
00004E A9000004            A   538    	CPX	_command,#-0
000052 6B 54               A   539    	JR	Z,_1_L_7
                           A   540    ;   47				sprintf(inChar, "Command: %
                           A   541    .line 47
000054 1CFF                A   542    	LD	R1,#255
000056 0CE7                A   543    	LD	R0,#231
000058 020F                A   544    	ADD	R0,R15
00005A 121E                A   545    	ADC	R1,R14
00005C 941000              A   546    	LDX	___print_out,R1
00005F 940001              A   547    	LDX	___print_out+1,R0
000062 1F70 00             A   548    	PUSH	#low(L__2)
000065 1F70 00             A   549    	PUSH	#high(L__2)
000068 D6 0000             A   550    	CALL	___print_putromstring
00006B 50E0                A   551    	POP	R0
00006D 50E0                A   552    	POP	R0
00006F E8 004000           A   553    	LDX	___print_buff,_command
000073 E9000001            A   554    	LDX	___print_buff+1,#-0
000077 D6 0000             A   555    	CALL	___print_send
00007A 1F70 0A             A   556    	PUSH	#low(L__3)
00007D 1F70 00             A   557    	PUSH	#high(L__3)
000080 D6 0000             A   558    	CALL	___print_putromstring
000083 50E0                A   559    	POP	R0
000085 50E0                A   560    	POP	R0
000087 1F7000              A   561    	PUSH	#0
00008A D6 0000             A   562    	CALL	___print_sputch
00008D 50E0                A   563    	POP	R0
                           A   564    ;   48				sendString(inChar);
                           A   565    .line 48
00008F 1CFF                A   566    	LD	R1,#255
000091 0CE7                A   567    	LD	R0,#231
000093 020F                A   568    	ADD	R0,R15
000095 121E                A   569    	ADC	R1,R14
000097 70E0                A   570    	PUSH	R0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  12


PC     Object              I  Line    Source main.src
000099 70E1                A   571    	PUSH	R1
00009B D6 0000             A   572    	CALL	_sendString
00009E 885EE5              A   573    	LDX	R5,-27(RR14)
0000A1 884EE6              A   574    	LDX	R4,-26(RR14)
0000A4 50E0                A   575    	POP	R0
0000A6 50E0                A   576    	POP	R0
                           A   577    ;   49			}
0000A8                     A   578    _1_L_7:
                           A   579    .line 49
                           A   580    ;   50			if(command == 'w'){
                           A   581    .line 50
0000A8 A9770004            A   582    	CPX	_command,#119
0000AC EB 38               A   583    	JR	NE,_1_L_6
                           A   584    ;   51				//  sprintf(inChar, "%c", c
                           A   585    ;   52				//  sendString(inChar);
                           A   586    ;   53				//  printMessage(inChar, 1)
                           A   587    ;   54				speed = speed + 1;
                           A   588    .line 54
0000AE 09010007            A   589    	ADDX	_speed+1,#1
0000B2 19000006            A   590    	ADCX	_speed,#-0
                           A   591    ;   55				command = 0;
                           A   592    .line 55
0000B6 E9000004            A   593    	LDX	_command,#-0
                           A   594    ;   56				motorsSet(speed, r, roffset
                           A   595    .line 56
0000BA 1F70AE              A   596    	PUSH	#174
0000BD 1F7001              A   597    	PUSH	#1
0000C0 1F70C2              A   598    	PUSH	#194
0000C3 1F7001              A   599    	PUSH	#1
0000C6 1F7000              A   600    	PUSH	#0
0000C9 1F7000              A   601    	PUSH	#0
0000CC C8 0070             A   602    	PUSHX	_speed+1
0000CF C8 0060             A   603    	PUSHX	_speed
0000D2 D6 0000             A   604    	CALL	_motorsSet
0000D5 885EE5              A   605    	LDX	R5,-27(RR14)
0000D8 884EE6              A   606    	LDX	R4,-26(RR14)
0000DB 2F                  A   607    	ATM	
0000DC 09080FFF            A   608    	ADDX	4095,#8
0000E0 19000FFE            A   609    	ADCX	4094,#-0
                           A   610    ;   57			} else if(command == 's'){
                           A   611    .line 57
0000E4 8B 52               A   612    	JR	_1_L_9
0000E6                     A   613    _1_L_6:
0000E6 A9730004            A   614    	CPX	_command,#115
0000EA EB 38               A   615    	JR	NE,_1_L_4
                           A   616    ;   58				speed = speed - 1;
                           A   617    .line 58
0000EC 09FF0007            A   618    	ADDX	_speed+1,#255
0000F0 19FF0006            A   619    	ADCX	_speed,#255
                           A   620    ;   59				command = 0;
                           A   621    .line 59
0000F4 E9000004            A   622    	LDX	_command,#-0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  13


PC     Object              I  Line    Source main.src
                           A   623    ;   60				motorsSet(speed, r, roffset
                           A   624    .line 60
0000F8 1F70AE              A   625    	PUSH	#174
0000FB 1F7001              A   626    	PUSH	#1
0000FE 1F70C2              A   627    	PUSH	#194
000101 1F7001              A   628    	PUSH	#1
000104 1F7000              A   629    	PUSH	#0
000107 1F7000              A   630    	PUSH	#0
00010A C8 0070             A   631    	PUSHX	_speed+1
00010D C8 0060             A   632    	PUSHX	_speed
000110 D6 0000             A   633    	CALL	_motorsSet
000113 885EE5              A   634    	LDX	R5,-27(RR14)
000116 884EE6              A   635    	LDX	R4,-26(RR14)
000119 2F                  A   636    	ATM	
00011A 09080FFF            A   637    	ADDX	4095,#8
00011E 19000FFE            A   638    	ADCX	4094,#-0
                           A   639    ;   61			} else if(command == 'm'){
                           A   640    .line 61
000122 8B 14               A   641    	JR	_1_L_9
000124                     A   642    _1_L_4:
000124 A96D0004            A   643    	CPX	_command,#109
000128 EB 0E               A   644    	JR	NE,_1_L_9
                           A   645    ;   62				tmp = mode(1);
                           A   646    .line 62
00012A 1F7001              A   647    	PUSH	#1
00012D D6 0155             A   648    	CALL	_mode
000130 885EE5              A   649    	LDX	R5,-27(RR14)
000133 884EE6              A   650    	LDX	R4,-26(RR14)
000136 50E0                A   651    	POP	R0
                           A   652    ;   63			}
000138                     A   653    _1_L_9:
                           A   654    .line 63
                           A   655    ;   64			//
                           A   656    ;   65			if(i>30000){
                           A   657    .line 65
000138 A6E530              A   658    	CP	R5,#48
00013B 1FA6E475            A   659    	CPC	R4,#117
00013F 2D 00 3A            A   660    	JR	LE,_1_L_10
                           A   661    ;   66				// sprintf(inChar, "%d", ac
                           A   662    ;   67				// printMessage(inChar, 1);
                           A   663    ;   68				tmp = mode(0);
                           A   664    .line 68
000142 1F7000              A   665    	PUSH	#0
000145 D6 0155             A   666    	CALL	_mode
000148 50E0                A   667    	POP	R0
                           A   668    ;   69				i=0;
                           A   669    .line 69
00014A B0E4                A   670    	CLR	R4
00014C B0E5                A   671    	CLR	R5
                           A   672    ;   70			}
                           A   673    ;   71	// 		dly(100);
                           A   674    ;   72	
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  14


PC     Object              I  Line    Source main.src
                           A   675    ;   73		}
                           A   676    .line 73
00014E 8D 00 3A            A   677    	JR	_1_L_10
                           A   678    ;   74	}
                           A   679    .line 74
000151 D6 0000             A   680    	CALL	__b_framereset
000154 AF                  A   681    	RET	
                           A   682    .endfunc "main",74,"_main"
                           A   683    	SEGMENT ROM_DATA
                           A   684    
                           A   685    
                           A   686    ;**************************** _mode ***********
                           A   687    ;Name                         Addr/Register   S
                           A   688    ;_mems_read                          IMPORT  --
                           A   689    ;_printI2Cq                          STATIC    
                           A   690    ;_printMessage                       IMPORT  --
                           A   691    ;___print_sputch                     IMPORT  --
                           A   692    ;__u_stoa                            IMPORT  --
                           A   693    ;___print_out                        IMPORT    
                           A   694    ;_speed                              STATIC    
                           A   695    ;_1tmpSpeed                          STATIC    
                           A   696    ;_0m                                 STATIC    
                           A   697    ;inChar                              R15-25    
                           A   698    ;change                               R15+4    
                           A   699    
                           A   700    
                           A   701    ; Aggregate Stack Size: -25 (words)
                           A   702    
                           A   703    
                           A   704    	.FRAME _n_mode,?_n_mode,RDATA
                           A   705    	.FCALL _n__u_stoa
                           A   706    	.FCALL _n___print_sputch
                           A   707    	.FCALL _n_printMessage
                           A   708    	.FCALL _n_mems_read
                           A   709    	.FRAME _f_mode,?_f_mode,EDATA
                           A   710    	.FCALL _f__u_stoa
                           A   711    	.FCALL _f___print_sputch
                           A   712    	.FCALL _f_printMessage
                           A   713    	.FCALL _f_mems_read
                           A   714    	SEGMENT FAR_DATA
000009                     A   715    _0m:
000009 01                  A   716    	DB	1
00000A                     A   717    _1tmpSpeed:
00000A 00                  A   718    	DB	0
                           A   719    	SEGMENT main_TEXT
000155                     A   720    _mode:
                           A   721    .define "_mode"
                           A   722    .value _mode
                           A   723    .class 2
                           A   724    .type 66
                           A   725    .type 0
                           A   726    .endef
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  15


PC     Object              I  Line    Source main.src
                           A   727    .begfunc "mode",77,"_mode"
                           A   728    .define "change"
                           A   729    .class 9
                           A   730    .value 4
                           A   731    .type 2
                           A   732    .type 0
                           A   733    .endef
                           A   734    ;   75	
                           A   735    ;   76	
                           A   736    ;   77	char mode(char change){
                           A   737    .define "inChar"
                           A   738    .class 1
                           A   739    .value -25
                           A   740    .dim 25
                           A   741    .type 98
                           A   742    .type 0
                           A   743    .endef
                           A   744    .define "m"
                           A   745    .alias "_0m"
                           A   746    .class 69
                           A   747    .value _0m
                           A   748    .type 2
                           A   749    .type 0
                           A   750    .endef
                           A   751    .define "tmpSpeed"
                           A   752    .alias "_1tmpSpeed"
                           A   753    .class 69
                           A   754    .value _1tmpSpeed
                           A   755    .type 2
                           A   756    .type 0
                           A   757    .endef
000155 5C19                A   758    	LD	R5,#25
000157 D6 0000             A   759    	CALL	__b_frameset0
                           A   760    ;   78		static char m = 1;
                           A   761    ;   79		char inChar[25];
                           A   762    ;   80		static char tmpSpeed = 0;
                           A   763    ;   81	
                           A   764    ;   82		if(m){
                           A   765    .line 82
00015A A9000009            A   766    	CPX	_0m,#-0
00015E 6B 5A               A   767    	JR	Z,_2_L_16
                           A   768    ;   83			if(tmpSpeed != speed){
                           A   769    .line 83
000160 84100A              A   770    	LDX	R1,_1tmpSpeed
000163 E4E1E0              A   771    	LD	R0,R1
000166 90E0                A   772    	RL	R0
000168 3200                A   773    	SBC	R0,R0
00016A A8 007EE1           A   774    	CPX	R1,_speed+1
00016E 1FA8 006EE0         A   775    	CPCX	R0,_speed
000173 6B 3B               A   776    	JR	Z,_2_L_14
                           A   777    ;   84				sprintf(inChar, "%d", speed
                           A   778    .line 84
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  16


PC     Object              I  Line    Source main.src
000175 1CFF                A   779    	LD	R1,#255
000177 0CE7                A   780    	LD	R0,#231
000179 020F                A   781    	ADD	R0,R15
00017B 121E                A   782    	ADC	R1,R14
00017D 941000              A   783    	LDX	___print_out,R1
000180 940001              A   784    	LDX	___print_out+1,R0
000183 C8 0070             A   785    	PUSHX	_speed+1
000186 C8 0060             A   786    	PUSHX	_speed
000189 D6 0000             A   787    	CALL	__u_stoa
00018C 50E0                A   788    	POP	R0
00018E 50E0                A   789    	POP	R0
000190 1F7000              A   790    	PUSH	#0
000193 D6 0000             A   791    	CALL	___print_sputch
000196 50E0                A   792    	POP	R0
                           A   793    ;   85				printMessage(inChar, 1);
                           A   794    .line 85
000198 1F7001              A   795    	PUSH	#1
00019B 1CFF                A   796    	LD	R1,#255
00019D 0CE7                A   797    	LD	R0,#231
00019F 020F                A   798    	ADD	R0,R15
0001A1 121E                A   799    	ADC	R1,R14
0001A3 70E0                A   800    	PUSH	R0
0001A5 70E1                A   801    	PUSH	R1
0001A7 D6 0000             A   802    	CALL	_printMessage
0001AA 50E0                A   803    	POP	R0
0001AC 50E0                A   804    	POP	R0
0001AE 50E0                A   805    	POP	R0
                           A   806    ;   86			}
0001B0                     A   807    _2_L_14:
                           A   808    .line 86
                           A   809    ;   87			tmpSpeed = speed;
                           A   810    .line 87
0001B0 E8 00700A           A   811    	LDX	_1tmpSpeed,_speed+1
                           A   812    ;   88			printI2Cq = 0;
                           A   813    .line 88
0001B4 E9000008            A   814    	LDX	_printI2Cq,#-0
                           A   815    ;   89		} else {
                           A   816    .line 89
0001B8 8B 07               A   817    	JR	_2_L_19
0001BA                     A   818    _2_L_16:
                           A   819    ;   90			printI2Cq = 1;
                           A   820    .line 90
0001BA E9010008            A   821    	LDX	_printI2Cq,#1
                           A   822    ;   91			mems_read();
                           A   823    .line 91
0001BE D6 0000             A   824    	CALL	_mems_read
                           A   825    ;   92		}
0001C1                     A   826    _2_L_19:
                           A   827    .line 92
                           A   828    ;   93	
                           A   829    ;   94		if(change){
                           A   830    .line 94
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  17


PC     Object              I  Line    Source main.src
0001C1 880E04              A   831    	LDX	R0,4(RR14)
0001C4 4200                A   832    	OR	R0,R0
0001C6 6B 09               A   833    	JR	Z,_2_L_18
                           A   834    ;   95			m ^= 0x01;
                           A   835    .line 95
0001C8 B9010009            A   836    	XORX	_0m,#1
                           A   837    ;   96			return m;
                           A   838    .line 96
0001CC 840009              A   839    	LDX	R0,_0m
0001CF 8B 03               A   840    	JR	_2_L_20
                           A   841    ;   97		} else {
0001D1                     A   842    _2_L_18:
                           A   843    .line 97
                           A   844    ;   98			return m;
                           A   845    .line 98
0001D1 840009              A   846    	LDX	R0,_0m
                           A   847    ;   99		}
                           A   848    ;  100	
                           A   849    ;  101	}
0001D4                     A   850    _2_L_20:
                           A   851    .line 101
0001D4 D6 0000             A   852    	CALL	__b_framereset
0001D7 AF                  A   853    	RET	
                           A   854    .endfunc "mode",101,"_mode"
                           A   855    	SEGMENT ROM_DATA
                           A   856    
                           A   857    
                           A   858    ;**************************** _printI2CqF *****
                           A   859    ;Name                         Addr/Register   S
                           A   860    ;_printI2Cq                          STATIC    
                           A   861    
                           A   862    
                           A   863    ; Aggregate Stack Size: 0 (words)
                           A   864    
                           A   865    
                           A   866    	.FRAME _n_printI2CqF,?_n_printI2CqF,RDATA
                           A   867    	.FRAME _f_printI2CqF,?_f_printI2CqF,EDATA
                           A   868    	SEGMENT main_TEXT
0001D8                     A   869    _printI2CqF:
                           A   870    .define "_printI2CqF"
                           A   871    .value _printI2CqF
                           A   872    .class 2
                           A   873    .type 66
                           A   874    .type 0
                           A   875    .endef
                           A   876    .begfunc "printI2CqF",104,"_printI2CqF"
0001D8 D6 0000             A   877    	CALL	__b_frameset00
                           A   878    ;  102	
                           A   879    ;  103	
                           A   880    ;  104	char printI2CqF(void){
                           A   881    ;  105		return printI2Cq;
                           A   882    .line 105
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  18


PC     Object              I  Line    Source main.src
0001DB 840008              A   883    	LDX	R0,_printI2Cq
                           A   884    ;  106	}
                           A   885    .line 106
0001DE D6 0000             A   886    	CALL	__b_framereset
0001E1 AF                  A   887    	RET	
                           A   888    .endfunc "printI2CqF",106,"_printI2CqF"
                           A   889    	XREF _mems_read:ROM
                           A   890    	XREF _i2cInit:ROM
                           A   891    	XREF _commandF:ROM
                           A   892    	XREF _sendString:ROM
                           A   893    	XREF _init_coms:ROM
                           A   894    	XREF _motorsSet:ROM
                           A   895    	XREF _motorInit:ROM
                           A   896    	XREF __u_stoa:ROM
                           A   897    	XREF ___print_putromstring:ROM
                           A   898    	XREF ___print_sputch:ROM
                           A   899    	XREF ___print_send:ROM
                           A   900    	XREF ___print_out:EDATA
                           A   901    	XREF ___print_buff:EDATA
                           A   902    	XREF _printMessage:ROM
                           A   903    	XREF _signon:ROM
                           A   904    	XREF _init_LCD:ROM
                           A   905    	XREF __b_framereset:ROM
                           A   906    	XREF __b_frameset0:ROM
                           A   907    	XREF __b_frameset00:ROM
                           A   908    	XDEF _printI2CqF
                           A   909    	XDEF _mode
                           A   910    	XDEF _main
                           A   911    	XDEF _printI2Cq
                           A   912    	XDEF _speed
                           A   913    	XDEF _t1Ready
                           A   914    	XDEF _gyroZValue
                           A   915    	XDEF _gyroYValue
                           A   916    	XDEF _gyroXValue
                           A   917    	XDEF _accZValue
                           A   918    	XDEF _accYValue
                           A   919    	XDEF _accXValue
                           A   920    	XDEF _gyro_val
                           A   921    	XDEF _gyro_l
                           A   922    	XDEF _gyro_h
                           A   923    	XDEF _acc_x
                           A   924    	XDEF _acc_y
                           A   925    	XDEF _acc_yl
                           A   926    	XDEF _acc_yh
                           A   927    	XDEF _acc_xl
                           A   928    	XDEF _acc_xh
                           A   929    	XDEF _accRead
                           A   930    	XDEF _gyroRead
                           A   931    	XDEF _rxFlag
                           A   932    	XDEF _command
                           A   933    	XDEF _txFinished
                           A   934    	XDEF _string
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 27-Oct-16     00:47:45     page:  19


PC     Object              I  Line    Source main.src
                           A   935    	XDEF _inChar
                           A   936    	XDEF _RELOAD
                           A   937    	END


Errors: 0
Warnings: 0
Lines Assembled: 938
