Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog Z8 Encore! ANSI C Compiler Release 3.62
                           A     2    ; -nolocalcse -optsize -fastcall -const=RAM -mo
                           A     3    ; -nooptlink -regvar -reduceopt -debug -norevaa
                           A     4    ; -alias 
                           A     5    	DEFINE main_TEXT,SPACE=ROM
                           A     6    	FILE	"..\..\..\..\DOCUME~1\GITHUB\THIRDY
                           A     7    .debug "C"
                           A     8    	SEGMENT FAR_DATA
000000                     A     9    _RELOAD:
000000 03E8                A    10    	DW	1000
                           A    11    .define "RELOAD"
                           A    12    .alias "_RELOAD"
                           A    13    .class 69
                           A    14    .value _RELOAD
                           A    15    .type 3
                           A    16    .type 0
                           A    17    .endef
                           A    18    	SEGMENT main_TEXT
                           A    19    .begrec "fmt_type",16
                           A    20    .define "status"
                           A    21    .value 0
                           A    22    .class 8
                           A    23    .type 12
                           A    24    .type 0
                           A    25    .endef
                           A    26    .define "flags"
                           A    27    .value 1
                           A    28    .class 8
                           A    29    .type 12
                           A    30    .type 0
                           A    31    .endef
                           A    32    .define "size"
                           A    33    .value 2
                           A    34    .class 8
                           A    35    .type 2
                           A    36    .type 0
                           A    37    .endef
                           A    38    .define "chr"
                           A    39    .value 3
                           A    40    .class 8
                           A    41    .type 2
                           A    42    .type 0
                           A    43    .endef
                           A    44    .define "type"
                           A    45    .value 4
                           A    46    .class 8
                           A    47    .type 2
                           A    48    .type 0
                           A    49    .endef
                           A    50    .define "field_width"
                           A    51    .value 5
                           A    52    .class 8
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   2


PC     Object              I  Line    Source main.src
                           A    53    .type 2
                           A    54    .type 0
                           A    55    .endef
                           A    56    .define "precision"
                           A    57    .value 6
                           A    58    .class 8
                           A    59    .type 2
                           A    60    .type 0
                           A    61    .endef
                           A    62    .define "set_begin"
                           A    63    .value 7
                           A    64    .class 8
                           A    65    .type 162
                           A    66    .type 0
                           A    67    .endef
                           A    68    .define "set_end"
                           A    69    .value 9
                           A    70    .class 8
                           A    71    .type 162
                           A    72    .type 0
                           A    73    .endef
                           A    74    .define "pad_whole"
                           A    75    .value 11
                           A    76    .class 8
                           A    77    .type 12
                           A    78    .type 0
                           A    79    .endef
                           A    80    .define "pad_pre_fract"
                           A    81    .value 12
                           A    82    .class 8
                           A    83    .type 12
                           A    84    .type 0
                           A    85    .endef
                           A    86    .define "pad_post_fract"
                           A    87    .value 13
                           A    88    .class 8
                           A    89    .type 12
                           A    90    .type 0
                           A    91    .endef
                           A    92    .define "pad_at"
                           A    93    .value 14
                           A    94    .class 8
                           A    95    .type 162
                           A    96    .type 0
                           A    97    .endef
                           A    98    .endrec "fmt_type"
                           A    99    .begrec "flt_info",12
                           A   100    .define "flags"
                           A   101    .value 0
                           A   102    .class 8
                           A   103    .type 12
                           A   104    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   3


PC     Object              I  Line    Source main.src
                           A   105    .endef
                           A   106    .define "exp"
                           A   107    .value 1
                           A   108    .class 8
                           A   109    .type 2
                           A   110    .type 0
                           A   111    .endef
                           A   112    .define "digits"
                           A   113    .value 2
                           A   114    .class 8
                           A   115    .dim 10
                           A   116    .type 108
                           A   117    .type 0
                           A   118    .endef
                           A   119    .endrec "flt_info"
                           A   120    	SEGMENT FAR_DATA
000002                     A   121    _inChar:
000002 00                  A   122    	DB	0
                           A   123    .define "inChar"
                           A   124    .alias "_inChar"
                           A   125    .class 69
                           A   126    .value _inChar
                           A   127    .type 2
                           A   128    .type 0
                           A   129    .endef
                           A   130    	SEGMENT FAR_BSS
000000                     A   131    _string:
000000                     A   132    	DS	25
                           A   133    .define "string"
                           A   134    .alias "_string"
                           A   135    .class 83
                           A   136    .value _string
                           A   137    .dim 25
                           A   138    .type 98
                           A   139    .type 0
                           A   140    .endef
                           A   141    	SEGMENT FAR_DATA
000003                     A   142    _txFinished:
000003 01                  A   143    	DB	1
                           A   144    .define "txFinished"
                           A   145    .alias "_txFinished"
                           A   146    .class 69
                           A   147    .value _txFinished
                           A   148    .type 2
                           A   149    .type 0
                           A   150    .endef
000004                     A   151    _command:
000004 00                  A   152    	DB	0
                           A   153    .define "command"
                           A   154    .alias "_command"
                           A   155    .class 69
                           A   156    .value _command
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   4


PC     Object              I  Line    Source main.src
                           A   157    .type 2
                           A   158    .type 0
                           A   159    .endef
000005                     A   160    _rxFlag:
000005 00                  A   161    	DB	0
                           A   162    .define "rxFlag"
                           A   163    .alias "_rxFlag"
                           A   164    .class 69
                           A   165    .value _rxFlag
                           A   166    .type 2
                           A   167    .type 0
                           A   168    .endef
                           A   169    	SEGMENT FAR_BSS
000019                     A   170    _gyroRead:
000019                     A   171    	DS	2
                           A   172    .define "gyroRead"
                           A   173    .alias "_gyroRead"
                           A   174    .class 83
                           A   175    .value _gyroRead
                           A   176    .dim 2
                           A   177    .type 98
                           A   178    .type 0
                           A   179    .endef
00001B                     A   180    _accRead:
00001B                     A   181    	DS	6
                           A   182    .define "accRead"
                           A   183    .alias "_accRead"
                           A   184    .class 83
                           A   185    .value _accRead
                           A   186    .dim 6
                           A   187    .type 98
                           A   188    .type 0
                           A   189    .endef
000021                     A   190    _acc_xh:
000021                     A   191    	DS	1
                           A   192    .define "acc_xh"
                           A   193    .alias "_acc_xh"
                           A   194    .class 83
                           A   195    .value _acc_xh
                           A   196    .type 2
                           A   197    .type 0
                           A   198    .endef
000022                     A   199    _acc_xl:
000022                     A   200    	DS	1
                           A   201    .define "acc_xl"
                           A   202    .alias "_acc_xl"
                           A   203    .class 83
                           A   204    .value _acc_xl
                           A   205    .type 2
                           A   206    .type 0
                           A   207    .endef
000023                     A   208    _acc_yh:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   5


PC     Object              I  Line    Source main.src
000023                     A   209    	DS	1
                           A   210    .define "acc_yh"
                           A   211    .alias "_acc_yh"
                           A   212    .class 83
                           A   213    .value _acc_yh
                           A   214    .type 2
                           A   215    .type 0
                           A   216    .endef
000024                     A   217    _acc_yl:
000024                     A   218    	DS	1
                           A   219    .define "acc_yl"
                           A   220    .alias "_acc_yl"
                           A   221    .class 83
                           A   222    .value _acc_yl
                           A   223    .type 2
                           A   224    .type 0
                           A   225    .endef
000025                     A   226    _acc_y:
000025                     A   227    	DS	1
                           A   228    .define "acc_y"
                           A   229    .alias "_acc_y"
                           A   230    .class 83
                           A   231    .value _acc_y
                           A   232    .type 2
                           A   233    .type 0
                           A   234    .endef
000026                     A   235    _acc_x:
000026                     A   236    	DS	1
                           A   237    .define "acc_x"
                           A   238    .alias "_acc_x"
                           A   239    .class 83
                           A   240    .value _acc_x
                           A   241    .type 2
                           A   242    .type 0
                           A   243    .endef
000027                     A   244    _gyro_h:
000027                     A   245    	DS	1
                           A   246    .define "gyro_h"
                           A   247    .alias "_gyro_h"
                           A   248    .class 83
                           A   249    .value _gyro_h
                           A   250    .type 2
                           A   251    .type 0
                           A   252    .endef
000028                     A   253    _gyro_l:
000028                     A   254    	DS	1
                           A   255    .define "gyro_l"
                           A   256    .alias "_gyro_l"
                           A   257    .class 83
                           A   258    .value _gyro_l
                           A   259    .type 2
                           A   260    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   6


PC     Object              I  Line    Source main.src
                           A   261    .endef
000029                     A   262    _gyro_val:
000029                     A   263    	DS	2*1
                           A   264    .define "gyro_val"
                           A   265    .alias "_gyro_val"
                           A   266    .class 83
                           A   267    .value _gyro_val
                           A   268    .type 3
                           A   269    .type 0
                           A   270    .endef
00002B                     A   271    _accXValue:
00002B                     A   272    	DS	2*1
                           A   273    .define "accXValue"
                           A   274    .alias "_accXValue"
                           A   275    .class 83
                           A   276    .value _accXValue
                           A   277    .type 3
                           A   278    .type 0
                           A   279    .endef
00002D                     A   280    _accYValue:
00002D                     A   281    	DS	2*1
                           A   282    .define "accYValue"
                           A   283    .alias "_accYValue"
                           A   284    .class 83
                           A   285    .value _accYValue
                           A   286    .type 3
                           A   287    .type 0
                           A   288    .endef
00002F                     A   289    _accZValue:
00002F                     A   290    	DS	2*1
                           A   291    .define "accZValue"
                           A   292    .alias "_accZValue"
                           A   293    .class 83
                           A   294    .value _accZValue
                           A   295    .type 3
                           A   296    .type 0
                           A   297    .endef
000031                     A   298    _gyroXValue:
000031                     A   299    	DS	2*1
                           A   300    .define "gyroXValue"
                           A   301    .alias "_gyroXValue"
                           A   302    .class 83
                           A   303    .value _gyroXValue
                           A   304    .type 3
                           A   305    .type 0
                           A   306    .endef
                           A   307    	SEGMENT ROM_DATA
                           A   308    
                           A   309    
                           A   310    ;**************************** _main ***********
                           A   311    ;Name                         Addr/Register   S
                           A   312    ;_dly                                IMPORT  --
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   7


PC     Object              I  Line    Source main.src
                           A   313    ;_mems_read                          IMPORT  --
                           A   314    ;_command                            STATIC    
                           A   315    ;_rxFlag                             STATIC    
                           A   316    ;_sendString                         IMPORT  --
                           A   317    ;_EI                                 IMPORT  --
                           A   318    ;_motorInit                          IMPORT  --
                           A   319    ;_init_coms                          IMPORT  --
                           A   320    ;_signon                             IMPORT  --
                           A   321    ;_init_LCD                           IMPORT  --
                           A   322    ;_i2cInit                            IMPORT  --
                           A   323    ;_init_IO                            IMPORT  --
                           A   324    ;_DI                                 IMPORT  --
                           A   325    ;speed                          <optimized>    
                           A   326    
                           A   327    
                           A   328    ; Aggregate Stack Size: 0 (words)
                           A   329    
                           A   330    
                           A   331    	.FRAME _n_main,?_n_main,RDATA
                           A   332    	.FCALL _n_init_IO
                           A   333    	.FCALL _n_i2cInit
                           A   334    	.FCALL _n_init_LCD
                           A   335    	.FCALL _n_signon
                           A   336    	.FCALL _n_init_coms
                           A   337    	.FCALL _n_motorInit
                           A   338    	.FCALL _n_sendString
                           A   339    	.FCALL _n_mems_read
                           A   340    	.FCALL _n_dly
                           A   341    	.FRAME _f_main,?_f_main,EDATA
                           A   342    	.FCALL _f_init_IO
                           A   343    	.FCALL _f_i2cInit
                           A   344    	.FCALL _f_init_LCD
                           A   345    	.FCALL _f_signon
                           A   346    	.FCALL _f_init_coms
                           A   347    	.FCALL _f_motorInit
                           A   348    	.FCALL _f_sendString
                           A   349    	.FCALL _f_mems_read
                           A   350    	.FCALL _f_dly
                           A   351    	SEGMENT TEXT
000000                     A   352    L__0:
000000 41542B4E 414D4572   A   353    	DB	"AT+NAMErJordan"
000008 4A6F7264 616E 
00000E 00                  A   354    	DB	0
00000F                     A   355    L__1:
00000F 676F7420 68657265   A   356    	DB	"got here"
000017 00                  A   357    	DB	0
                           A   358    	SEGMENT main_TEXT
000000                     A   359    _main:
                           A   360    .define "_main"
                           A   361    .value _main
                           A   362    .class 2
                           A   363    .type 65
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   8


PC     Object              I  Line    Source main.src
                           A   364    .type 0
                           A   365    .endef
                           A   366    .begfunc "main",15,"_main"
                           A   367    ;    1	#include <ez8.h>
                           A   368    ;    2	#include <delay.h>
                           A   369    ;    3	#include <STRING.H>
                           A   370    ;    4	#include <LCD.H>
                           A   371    ;    5	#include <STDIO.H>
                           A   372    ;    6	#include <motor.h>
                           A   373    ;    7	#include <uart.h>
                           A   374    ;    8	#include <i2c.h>
                           A   375    ;    9	
                           A   376    ;   10	#define loffset 405
                           A   377    ;   11	#define roffset 407
                           A   378    ;   12	
                           A   379    ;   13	void init_IO(void);
                           A   380    ;   14	
                           A   381    ;   15	void main(void){
                           A   382    .define "U‹ìjÿh0/J"
                           A   383    .class 4
                           A   384    .reg -1
                           A   385    .type 3
                           A   386    .type 0
                           A   387    .endef
000000 D6 0000             A   388    	CALL	__b_frameset00
                           A   389    ;   16		char reser[];
                           A   390    ;   17		char test[5];
                           A   391    ;   18		char inChar[25];
                           A   392    ;   19		int speed = 0;
                           A   393    .line 19
                           A   394    ;   20		DI();
                           A   395    .line 20
000003 8F                  A   396    	DI
                           A   397    ;   21		init_IO();
                           A   398    .line 21
000004 D6 003D             A   399    	CALL	_init_IO
                           A   400    ;   22		i2cInit();
                           A   401    .line 22
000007 D6 0000             A   402    	CALL	_i2cInit
                           A   403    ;   23		init_LCD();
                           A   404    .line 23
00000A D6 0000             A   405    	CALL	_init_LCD
                           A   406    ;   24		signon();
                           A   407    .line 24
00000D D6 0000             A   408    	CALL	_signon
                           A   409    ;   25		// printMessage("This is a test", 1
                           A   410    ;   26		init_coms();
                           A   411    .line 26
000010 D6 0000             A   412    	CALL	_init_coms
                           A   413    ;   27	
                           A   414    ;   28		motorInit();
                           A   415    .line 28
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:   9


PC     Object              I  Line    Source main.src
000013 D6 0000             A   416    	CALL	_motorInit
                           A   417    ;   29		EI();
                           A   418    .line 29
000016 9F                  A   419    	EI
                           A   420    ;   30		sendString("AT+NAMErJordan");
                           A   421    .line 30
000017 8C 00               A   422    	LD	R8,#high(L__0)
000019 9C 00               A   423    	LD	R9,#low(L__0)
00001B D6 0000             A   424    	CALL	_sendString
                           A   425    ;   31	
                           A   426    ;   32		rxFlag = 0;
                           A   427    .line 32
00001E E9000005            A   428    	LDX	_rxFlag,#-0
                           A   429    ;   33		command = 0;
                           A   430    .line 33
000022 E9000004            A   431    	LDX	_command,#-0
                           A   432    ;   34		
                           A   433    ;   35		sendString("got here");
                           A   434    .line 35
000026 8C 00               A   435    	LD	R8,#high(L__1)
000028 9C 0F               A   436    	LD	R9,#low(L__1)
00002A D6 0000             A   437    	CALL	_sendString
                           A   438    ;   36	
                           A   439    ;   37		while(1){
00002D                     A   440    _1_L_0:
                           A   441    .line 37
                           A   442    ;   38	
                           A   443    ;   39			mems_read();
                           A   444    .line 39
00002D D6 0000             A   445    	CALL	_mems_read
                           A   446    ;   40			dly(50);
                           A   447    .line 40
000030 B0E8                A   448    	CLR	R8
000032 9C32                A   449    	LD	R9,#50
000034 D6 0000             A   450    	CALL	_dly
                           A   451    ;   41			
                           A   452    ;   42			
                           A   453    ;   43	// 		command = commandF();
                           A   454    ;   44	// 		if(command == 'w'){
                           A   455    ;   45	// 			//  sprintf(inChar, "%c", c
                           A   456    ;   46	// 			//  sendString(inChar);
                           A   457    ;   47	// 			//  printMessage(inChar, 1)
                           A   458    ;   48	// 			speed = speed + 1;
                           A   459    ;   49	// 			command = 0;
                           A   460    ;   50	// 			sprintf(inChar, "%d", speed
                           A   461    ;   51	// 			printMessage(inChar, 1);
                           A   462    ;   52	// 			motorsSet(speed, 0, loffset
                           A   463    ;   53	// 		} else if(command == 's'){
                           A   464    ;   54	// 			speed = speed - 1;
                           A   465    ;   55	// 			command = 0;
                           A   466    ;   56	// 			sprintf(inChar, "%d", speed
                           A   467    ;   57	// 			printMessage(inChar, 1);
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:  10


PC     Object              I  Line    Source main.src
                           A   468    ;   58	// 			motorsSet(speed, 0, loffset
                           A   469    ;   59	// 		}
                           A   470    ;   60			
                           A   471    ;   61		}
                           A   472    .line 61
000037 8B F4               A   473    	JR	_1_L_0
                           A   474    ;   62	}
                           A   475    .line 62
000039 D6 0000             A   476    	CALL	__b_framereset
00003C AF                  A   477    	RET	
                           A   478    .endfunc "main",62,"_main"
                           A   479    	SEGMENT ROM_DATA
                           A   480    
                           A   481    
                           A   482    ;**************************** _init_IO ********
                           A   483    ;Name                         Addr/Register   S
                           A   484    
                           A   485    
                           A   486    ; Aggregate Stack Size: 0 (words)
                           A   487    
                           A   488    
                           A   489    	.FRAME _n_init_IO,?_n_init_IO,RDATA
                           A   490    	.FRAME _f_init_IO,?_f_init_IO,EDATA
                           A   491    	SEGMENT main_TEXT
00003D                     A   492    _init_IO:
                           A   493    .define "_init_IO"
                           A   494    .value _init_IO
                           A   495    .class 2
                           A   496    .type 65
                           A   497    .type 0
                           A   498    .endef
                           A   499    .begfunc "init_IO",65,"_init_IO"
00003D D6 0000             A   500    	CALL	__b_frameset00
                           A   501    ;   63	
                           A   502    ;   64	
                           A   503    ;   65	void init_IO(void){
                           A   504    ;   66	
                           A   505    ;   67		//Initialise Port G to be entirely 
                           A   506    ;   68		// PGAF = 0x00;
                           A   507    ;   69		// PGDD = 0x00;
                           A   508    ;   70		// PGADDR = 0x00;
                           A   509    ;   71		// PGOUT = 0x00;
                           A   510    ;   72	
                           A   511    ;   73	}
                           A   512    .line 73
000040 D6 0000             A   513    	CALL	__b_framereset
000043 AF                  A   514    	RET	
                           A   515    .endfunc "init_IO",73,"_init_IO"
                           A   516    	XREF _mems_read:ROM
                           A   517    	XREF _i2cInit:ROM
                           A   518    	XREF _sendString:ROM
                           A   519    	XREF _init_coms:ROM
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     22:43:46     page:  11


PC     Object              I  Line    Source main.src
                           A   520    	XREF _motorInit:ROM
                           A   521    	XREF _signon:ROM
                           A   522    	XREF _init_LCD:ROM
                           A   523    	XREF _dly:ROM
                           A   524    	XREF __b_framereset:ROM
                           A   525    	XREF __b_frameset00:ROM
                           A   526    	XDEF _init_IO
                           A   527    	XDEF _main
                           A   528    	XDEF _gyroXValue
                           A   529    	XDEF _accZValue
                           A   530    	XDEF _accYValue
                           A   531    	XDEF _accXValue
                           A   532    	XDEF _gyro_val
                           A   533    	XDEF _gyro_l
                           A   534    	XDEF _gyro_h
                           A   535    	XDEF _acc_x
                           A   536    	XDEF _acc_y
                           A   537    	XDEF _acc_yl
                           A   538    	XDEF _acc_yh
                           A   539    	XDEF _acc_xl
                           A   540    	XDEF _acc_xh
                           A   541    	XDEF _accRead
                           A   542    	XDEF _gyroRead
                           A   543    	XDEF _rxFlag
                           A   544    	XDEF _command
                           A   545    	XDEF _txFinished
                           A   546    	XDEF _string
                           A   547    	XDEF _inChar
                           A   548    	XDEF _RELOAD
                           A   549    	END


Errors: 0
Warnings: 0
Lines Assembled: 550
