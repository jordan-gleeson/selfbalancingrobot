Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog Z8 Encore! ANSI C Compiler Release 3.62
                           A     2    ; -nolocalcse -optsize -nofastcall -const=RAM -
                           A     3    ; -nooptlink -regvar -reduceopt -debug -norevaa
                           A     4    ; -alias 
                           A     5    	DEFINE main_TEXT,SPACE=ROM
                           A     6    	FILE	"..\..\..\..\DOCUME~1\GITHUB\THIRDY
                           A     7    .debug "C"
                           A     8    	SEGMENT FAR_DATA
000000                     A     9    _RELOAD:
000000 03E8                A    10    	DW	1000
                           A    11    .define "RELOAD"
                           A    12    .alias "_RELOAD"
                           A    13    .class 69
                           A    14    .value _RELOAD
                           A    15    .type 3
                           A    16    .type 0
                           A    17    .endef
                           A    18    	SEGMENT main_TEXT
                           A    19    .begrec "fmt_type",16
                           A    20    .define "status"
                           A    21    .value 0
                           A    22    .class 8
                           A    23    .type 12
                           A    24    .type 0
                           A    25    .endef
                           A    26    .define "flags"
                           A    27    .value 1
                           A    28    .class 8
                           A    29    .type 12
                           A    30    .type 0
                           A    31    .endef
                           A    32    .define "size"
                           A    33    .value 2
                           A    34    .class 8
                           A    35    .type 2
                           A    36    .type 0
                           A    37    .endef
                           A    38    .define "chr"
                           A    39    .value 3
                           A    40    .class 8
                           A    41    .type 2
                           A    42    .type 0
                           A    43    .endef
                           A    44    .define "type"
                           A    45    .value 4
                           A    46    .class 8
                           A    47    .type 2
                           A    48    .type 0
                           A    49    .endef
                           A    50    .define "field_width"
                           A    51    .value 5
                           A    52    .class 8
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   2


PC     Object              I  Line    Source main.src
                           A    53    .type 2
                           A    54    .type 0
                           A    55    .endef
                           A    56    .define "precision"
                           A    57    .value 6
                           A    58    .class 8
                           A    59    .type 2
                           A    60    .type 0
                           A    61    .endef
                           A    62    .define "set_begin"
                           A    63    .value 7
                           A    64    .class 8
                           A    65    .type 162
                           A    66    .type 0
                           A    67    .endef
                           A    68    .define "set_end"
                           A    69    .value 9
                           A    70    .class 8
                           A    71    .type 162
                           A    72    .type 0
                           A    73    .endef
                           A    74    .define "pad_whole"
                           A    75    .value 11
                           A    76    .class 8
                           A    77    .type 12
                           A    78    .type 0
                           A    79    .endef
                           A    80    .define "pad_pre_fract"
                           A    81    .value 12
                           A    82    .class 8
                           A    83    .type 12
                           A    84    .type 0
                           A    85    .endef
                           A    86    .define "pad_post_fract"
                           A    87    .value 13
                           A    88    .class 8
                           A    89    .type 12
                           A    90    .type 0
                           A    91    .endef
                           A    92    .define "pad_at"
                           A    93    .value 14
                           A    94    .class 8
                           A    95    .type 162
                           A    96    .type 0
                           A    97    .endef
                           A    98    .endrec "fmt_type"
                           A    99    .begrec "flt_info",12
                           A   100    .define "flags"
                           A   101    .value 0
                           A   102    .class 8
                           A   103    .type 12
                           A   104    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   3


PC     Object              I  Line    Source main.src
                           A   105    .endef
                           A   106    .define "exp"
                           A   107    .value 1
                           A   108    .class 8
                           A   109    .type 2
                           A   110    .type 0
                           A   111    .endef
                           A   112    .define "digits"
                           A   113    .value 2
                           A   114    .class 8
                           A   115    .dim 10
                           A   116    .type 108
                           A   117    .type 0
                           A   118    .endef
                           A   119    .endrec "flt_info"
                           A   120    	SEGMENT FAR_DATA
000002                     A   121    _inChar:
000002 00                  A   122    	DB	0
                           A   123    .define "inChar"
                           A   124    .alias "_inChar"
                           A   125    .class 69
                           A   126    .value _inChar
                           A   127    .type 2
                           A   128    .type 0
                           A   129    .endef
                           A   130    	SEGMENT FAR_BSS
000000                     A   131    _string:
000000                     A   132    	DS	25
                           A   133    .define "string"
                           A   134    .alias "_string"
                           A   135    .class 83
                           A   136    .value _string
                           A   137    .dim 25
                           A   138    .type 98
                           A   139    .type 0
                           A   140    .endef
                           A   141    	SEGMENT FAR_DATA
000003                     A   142    _txFinished:
000003 01                  A   143    	DB	1
                           A   144    .define "txFinished"
                           A   145    .alias "_txFinished"
                           A   146    .class 69
                           A   147    .value _txFinished
                           A   148    .type 2
                           A   149    .type 0
                           A   150    .endef
000004                     A   151    _command:
000004 00                  A   152    	DB	0
                           A   153    .define "command"
                           A   154    .alias "_command"
                           A   155    .class 69
                           A   156    .value _command
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   4


PC     Object              I  Line    Source main.src
                           A   157    .type 2
                           A   158    .type 0
                           A   159    .endef
000005                     A   160    _rxFlag:
000005 00                  A   161    	DB	0
                           A   162    .define "rxFlag"
                           A   163    .alias "_rxFlag"
                           A   164    .class 69
                           A   165    .value _rxFlag
                           A   166    .type 2
                           A   167    .type 0
                           A   168    .endef
                           A   169    	SEGMENT FAR_BSS
000019                     A   170    _gyroRead:
000019                     A   171    	DS	6
                           A   172    .define "gyroRead"
                           A   173    .alias "_gyroRead"
                           A   174    .class 83
                           A   175    .value _gyroRead
                           A   176    .dim 6
                           A   177    .type 98
                           A   178    .type 0
                           A   179    .endef
00001F                     A   180    _accRead:
00001F                     A   181    	DS	6
                           A   182    .define "accRead"
                           A   183    .alias "_accRead"
                           A   184    .class 83
                           A   185    .value _accRead
                           A   186    .dim 6
                           A   187    .type 98
                           A   188    .type 0
                           A   189    .endef
000025                     A   190    _acc_xh:
000025                     A   191    	DS	1
                           A   192    .define "acc_xh"
                           A   193    .alias "_acc_xh"
                           A   194    .class 83
                           A   195    .value _acc_xh
                           A   196    .type 2
                           A   197    .type 0
                           A   198    .endef
000026                     A   199    _acc_xl:
000026                     A   200    	DS	1
                           A   201    .define "acc_xl"
                           A   202    .alias "_acc_xl"
                           A   203    .class 83
                           A   204    .value _acc_xl
                           A   205    .type 2
                           A   206    .type 0
                           A   207    .endef
000027                     A   208    _acc_yh:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   5


PC     Object              I  Line    Source main.src
000027                     A   209    	DS	1
                           A   210    .define "acc_yh"
                           A   211    .alias "_acc_yh"
                           A   212    .class 83
                           A   213    .value _acc_yh
                           A   214    .type 2
                           A   215    .type 0
                           A   216    .endef
000028                     A   217    _acc_yl:
000028                     A   218    	DS	1
                           A   219    .define "acc_yl"
                           A   220    .alias "_acc_yl"
                           A   221    .class 83
                           A   222    .value _acc_yl
                           A   223    .type 2
                           A   224    .type 0
                           A   225    .endef
000029                     A   226    _acc_y:
000029                     A   227    	DS	1
                           A   228    .define "acc_y"
                           A   229    .alias "_acc_y"
                           A   230    .class 83
                           A   231    .value _acc_y
                           A   232    .type 2
                           A   233    .type 0
                           A   234    .endef
00002A                     A   235    _acc_x:
00002A                     A   236    	DS	1
                           A   237    .define "acc_x"
                           A   238    .alias "_acc_x"
                           A   239    .class 83
                           A   240    .value _acc_x
                           A   241    .type 2
                           A   242    .type 0
                           A   243    .endef
00002B                     A   244    _gyro_h:
00002B                     A   245    	DS	1
                           A   246    .define "gyro_h"
                           A   247    .alias "_gyro_h"
                           A   248    .class 83
                           A   249    .value _gyro_h
                           A   250    .type 2
                           A   251    .type 0
                           A   252    .endef
00002C                     A   253    _gyro_l:
00002C                     A   254    	DS	1
                           A   255    .define "gyro_l"
                           A   256    .alias "_gyro_l"
                           A   257    .class 83
                           A   258    .value _gyro_l
                           A   259    .type 2
                           A   260    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   6


PC     Object              I  Line    Source main.src
                           A   261    .endef
00002D                     A   262    _gyro_val:
00002D                     A   263    	DS	2*1
                           A   264    .define "gyro_val"
                           A   265    .alias "_gyro_val"
                           A   266    .class 83
                           A   267    .value _gyro_val
                           A   268    .type 3
                           A   269    .type 0
                           A   270    .endef
00002F                     A   271    _accXValue:
00002F                     A   272    	DS	2*1
                           A   273    .define "accXValue"
                           A   274    .alias "_accXValue"
                           A   275    .class 83
                           A   276    .value _accXValue
                           A   277    .type 3
                           A   278    .type 0
                           A   279    .endef
000031                     A   280    _accYValue:
000031                     A   281    	DS	2*1
                           A   282    .define "accYValue"
                           A   283    .alias "_accYValue"
                           A   284    .class 83
                           A   285    .value _accYValue
                           A   286    .type 3
                           A   287    .type 0
                           A   288    .endef
000033                     A   289    _accZValue:
000033                     A   290    	DS	2*1
                           A   291    .define "accZValue"
                           A   292    .alias "_accZValue"
                           A   293    .class 83
                           A   294    .value _accZValue
                           A   295    .type 3
                           A   296    .type 0
                           A   297    .endef
000035                     A   298    _gyroXValue:
000035                     A   299    	DS	2*1
                           A   300    .define "gyroXValue"
                           A   301    .alias "_gyroXValue"
                           A   302    .class 83
                           A   303    .value _gyroXValue
                           A   304    .type 3
                           A   305    .type 0
                           A   306    .endef
000037                     A   307    _gyroYValue:
000037                     A   308    	DS	2*1
                           A   309    .define "gyroYValue"
                           A   310    .alias "_gyroYValue"
                           A   311    .class 83
                           A   312    .value _gyroYValue
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   7


PC     Object              I  Line    Source main.src
                           A   313    .type 3
                           A   314    .type 0
                           A   315    .endef
000039                     A   316    _gyroZValue:
000039                     A   317    	DS	2*1
                           A   318    .define "gyroZValue"
                           A   319    .alias "_gyroZValue"
                           A   320    .class 83
                           A   321    .value _gyroZValue
                           A   322    .type 3
                           A   323    .type 0
                           A   324    .endef
00003B                     A   325    _t1Ready:
00003B                     A   326    	DS	1
                           A   327    .define "t1Ready"
                           A   328    .alias "_t1Ready"
                           A   329    .class 83
                           A   330    .value _t1Ready
                           A   331    .type 2
                           A   332    .type 0
                           A   333    .endef
                           A   334    	SEGMENT FAR_DATA
000006                     A   335    _speed:
000006 0000                A   336    	DW	0
                           A   337    .define "speed"
                           A   338    .alias "_speed"
                           A   339    .class 69
                           A   340    .value _speed
                           A   341    .type 3
                           A   342    .type 0
                           A   343    .endef
000008                     A   344    _printI2Cq:
000008 00                  A   345    	DB	0
                           A   346    .define "printI2Cq"
                           A   347    .alias "_printI2Cq"
                           A   348    .class 69
                           A   349    .value _printI2Cq
                           A   350    .type 2
                           A   351    .type 0
                           A   352    .endef
                           A   353    	SEGMENT ROM_DATA
                           A   354    
                           A   355    
                           A   356    ;**************************** _main ***********
                           A   357    ;Name                         Addr/Register   S
                           A   358    ;_mode                               IMPORT  --
                           A   359    ;_motorsSet                          IMPORT  --
                           A   360    ;_speed                              STATIC    
                           A   361    ;___print_sputch                     IMPORT  --
                           A   362    ;___print_send                       IMPORT  --
                           A   363    ;___print_buff                       IMPORT  un
                           A   364    ;___print_putromstring               IMPORT  --
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   8


PC     Object              I  Line    Source main.src
                           A   365    ;___print_out                        IMPORT    
                           A   366    ;_commandF                           IMPORT  --
                           A   367    ;_command                            STATIC    
                           A   368    ;_rxFlag                             STATIC    
                           A   369    ;_sendString                         IMPORT  --
                           A   370    ;_EI                                 IMPORT  --
                           A   371    ;_motorInit                          IMPORT  --
                           A   372    ;_init_coms                          IMPORT  --
                           A   373    ;_signon                             IMPORT  --
                           A   374    ;_init_LCD                           IMPORT  --
                           A   375    ;_i2cInit                            IMPORT  --
                           A   376    ;inChar                              R15-25    
                           A   377    ;tmp                            <optimized>    
                           A   378    ;i                                      RR4    
                           A   379    
                           A   380    
                           A   381    ; Aggregate Stack Size: -27 (words)
                           A   382    
                           A   383    
                           A   384    	.FRAME _n_main,?_n_main,RDATA
                           A   385    	.FCALL _n_i2cInit
                           A   386    	.FCALL _n_init_LCD
                           A   387    	.FCALL _n_signon
                           A   388    	.FCALL _n_init_coms
                           A   389    	.FCALL _n_motorInit
                           A   390    	.FCALL _n_sendString
                           A   391    	.FCALL _n_commandF
                           A   392    	.FCALL _n___print_putromstring
                           A   393    	.FCALL _n___print_send
                           A   394    	.FCALL _n___print_sputch
                           A   395    	.FCALL _n_motorsSet
                           A   396    	.FCALL _n_mode
                           A   397    	.FRAME _f_main,?_f_main,EDATA
                           A   398    	.FCALL _f_i2cInit
                           A   399    	.FCALL _f_init_LCD
                           A   400    	.FCALL _f_signon
                           A   401    	.FCALL _f_init_coms
                           A   402    	.FCALL _f_motorInit
                           A   403    	.FCALL _f_sendString
                           A   404    	.FCALL _f_commandF
                           A   405    	.FCALL _f___print_putromstring
                           A   406    	.FCALL _f___print_send
                           A   407    	.FCALL _f___print_sputch
                           A   408    	.FCALL _f_motorsSet
                           A   409    	.FCALL _f_mode
                           A   410    	SEGMENT TEXT
000000                     A   411    L__0:
000000 41542B4E 414D4572   A   412    	DB	"AT+NAMErJordan"
000008 4A6F7264 616E 
00000E 00                  A   413    	DB	0
                           A   414    	SEGMENT ROM_TEXT
000000                     A   415    L__2:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:   9


PC     Object              I  Line    Source main.src
000000 436F6D6D 616E643A   A   416    	DB	"Command: "
000008 20 
000009 00                  A   417    	DB	0
00000A                     A   418    L__3:
00000A 20                  A   419    	DB	" "
00000B 0D0A00              A   420    	DB	13,10,0
                           A   421    	SEGMENT main_TEXT
000000                     A   422    _main:
                           A   423    .define "_main"
                           A   424    .value _main
                           A   425    .class 2
                           A   426    .type 65
                           A   427    .type 0
                           A   428    .endef
                           A   429    .begfunc "main",13,"_main"
                           A   430    ;    1	#include <ez8.h>
                           A   431    ;    2	#include <delay.h>
                           A   432    ;    3	#include <STRING.H>
                           A   433    ;    4	#include <LCD.H>
                           A   434    ;    5	#include <STDIO.H>
                           A   435    ;    6	#include <motor.h>
                           A   436    ;    7	#include <uart.h>
                           A   437    ;    8	#include <i2c.h>
                           A   438    ;    9	#include <main.h>
                           A   439    ;   10	
                           A   440    ;   11	
                           A   441    ;   12	//The main function that ran on the rob
                           A   442    ;   13	void main(void){
                           A   443    .define "U‹ìjÿh0/J"
                           A   444    .class 4
                           A   445    .reg 19
                           A   446    .type 3
                           A   447    .type 0
                           A   448    .endef
                           A   449    .define "U‹ìjÿh0/J"
                           A   450    .class 4
                           A   451    .reg -1
                           A   452    .type 2
                           A   453    .type 0
                           A   454    .endef
                           A   455    .define "inChar"
                           A   456    .class 1
                           A   457    .value -25
                           A   458    .dim 25
                           A   459    .type 98
                           A   460    .type 0
                           A   461    .endef
000000 5C1B                A   462    	LD	R5,#27
000002 D6 0000             A   463    	CALL	__b_frameset0
                           A   464    ;   14		char inChar[25];
                           A   465    ;   15		char tmp;
                           A   466    ;   16		int i;
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  10


PC     Object              I  Line    Source main.src
                           A   467    ;   17	
                           A   468    ;   18		//Initialise all of the different c
                           A   469    ;   19		i2cInit();
                           A   470    .line 19
000005 89E4E6              A   471    	LDX	-26(RR14),R4
000008 89E5E5              A   472    	LDX	-27(RR14),R5
00000B D6 0000             A   473    	CALL	_i2cInit
                           A   474    ;   20		init_LCD();
                           A   475    .line 20
00000E D6 0000             A   476    	CALL	_init_LCD
                           A   477    ;   21		//Confirm on the LCD that LCD initi
                           A   478    ;   22		signon();
                           A   479    .line 22
000011 D6 0000             A   480    	CALL	_signon
                           A   481    ;   23		init_coms();
                           A   482    .line 23
000014 D6 0000             A   483    	CALL	_init_coms
                           A   484    ;   24		motorInit();
                           A   485    .line 24
000017 D6 0000             A   486    	CALL	_motorInit
                           A   487    ;   25		//Global Enable interrupts
                           A   488    ;   26		EI();
                           A   489    .line 26
00001A 9F                  A   490    	EI
                           A   491    ;   27		//Set the name of the bluetooth mod
                           A   492    ;   28		sendString("AT+NAMErJordan");
                           A   493    .line 28
00001B 1F70 00             A   494    	PUSH	#low(L__0)
00001E 1F70 00             A   495    	PUSH	#high(L__0)
000021 D6 0000             A   496    	CALL	_sendString
000024 885EE5              A   497    	LDX	R5,-27(RR14)
000027 884EE6              A   498    	LDX	R4,-26(RR14)
00002A 50E0                A   499    	POP	R0
00002C 50E0                A   500    	POP	R0
                           A   501    ;   29	
                           A   502    ;   30		//Set values for global variables
                           A   503    ;   31		rxFlag = 0;
                           A   504    .line 31
00002E E9000005            A   505    	LDX	_rxFlag,#-0
                           A   506    ;   32		command = 0;
                           A   507    .line 32
000032 E9000004            A   508    	LDX	_command,#-0
                           A   509    ;   33	
                           A   510    ;   34	
                           A   511    ;   35	
                           A   512    ;   36	
                           A   513    ;   37	
                           A   514    ;   38		while(1){
000036                     A   515    _1_L_10:
                           A   516    .line 38
                           A   517    ;   39			i++;
                           A   518    .line 39
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  11


PC     Object              I  Line    Source main.src
000036 A0E4                A   519    	INCW	RR4
                           A   520    ;   40	
                           A   521    ;   41			//This switching code recieves 
                           A   522    ;   42			command = commandF();
                           A   523    .line 42
000038 89E4E6              A   524    	LDX	-26(RR14),R4
00003B 89E5E5              A   525    	LDX	-27(RR14),R5
00003E D6 0000             A   526    	CALL	_commandF
000041 885EE5              A   527    	LDX	R5,-27(RR14)
000044 884EE6              A   528    	LDX	R4,-26(RR14)
000047 940004              A   529    	LDX	_command,R0
                           A   530    ;   43			if(command != 0){
                           A   531    .line 43
00004A A9000004            A   532    	CPX	_command,#-0
00004E 6B 54               A   533    	JR	Z,_1_L_7
                           A   534    ;   44				sprintf(inChar, "Command: %
                           A   535    .line 44
000050 1CFF                A   536    	LD	R1,#255
000052 0CE7                A   537    	LD	R0,#231
000054 020F                A   538    	ADD	R0,R15
000056 121E                A   539    	ADC	R1,R14
000058 941000              A   540    	LDX	___print_out,R1
00005B 940001              A   541    	LDX	___print_out+1,R0
00005E 1F70 00             A   542    	PUSH	#low(L__2)
000061 1F70 00             A   543    	PUSH	#high(L__2)
000064 D6 0000             A   544    	CALL	___print_putromstring
000067 50E0                A   545    	POP	R0
000069 50E0                A   546    	POP	R0
00006B E8 004000           A   547    	LDX	___print_buff,_command
00006F E9000001            A   548    	LDX	___print_buff+1,#-0
000073 D6 0000             A   549    	CALL	___print_send
000076 1F70 0A             A   550    	PUSH	#low(L__3)
000079 1F70 00             A   551    	PUSH	#high(L__3)
00007C D6 0000             A   552    	CALL	___print_putromstring
00007F 50E0                A   553    	POP	R0
000081 50E0                A   554    	POP	R0
000083 1F7000              A   555    	PUSH	#0
000086 D6 0000             A   556    	CALL	___print_sputch
000089 50E0                A   557    	POP	R0
                           A   558    ;   45				sendString(inChar);
                           A   559    .line 45
00008B 1CFF                A   560    	LD	R1,#255
00008D 0CE7                A   561    	LD	R0,#231
00008F 020F                A   562    	ADD	R0,R15
000091 121E                A   563    	ADC	R1,R14
000093 70E0                A   564    	PUSH	R0
000095 70E1                A   565    	PUSH	R1
000097 D6 0000             A   566    	CALL	_sendString
00009A 885EE5              A   567    	LDX	R5,-27(RR14)
00009D 884EE6              A   568    	LDX	R4,-26(RR14)
0000A0 50E0                A   569    	POP	R0
0000A2 50E0                A   570    	POP	R0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  12


PC     Object              I  Line    Source main.src
                           A   571    ;   46			}
0000A4                     A   572    _1_L_7:
                           A   573    .line 46
                           A   574    ;   47			if(command == 'w'){
                           A   575    .line 47
0000A4 A9770004            A   576    	CPX	_command,#119
0000A8 EB 38               A   577    	JR	NE,_1_L_6
                           A   578    ;   48				speed = speed + 1;
                           A   579    .line 48
0000AA 09010007            A   580    	ADDX	_speed+1,#1
0000AE 19000006            A   581    	ADCX	_speed,#-0
                           A   582    ;   49				command = 0;
                           A   583    .line 49
0000B2 E9000004            A   584    	LDX	_command,#-0
                           A   585    ;   50				motorsSet(speed, 0, loffset
                           A   586    .line 50
0000B6 1F70BB              A   587    	PUSH	#187
0000B9 1F7001              A   588    	PUSH	#1
0000BC 1F7095              A   589    	PUSH	#149
0000BF 1F7001              A   590    	PUSH	#1
0000C2 1F7000              A   591    	PUSH	#0
0000C5 1F7000              A   592    	PUSH	#0
0000C8 C8 0070             A   593    	PUSHX	_speed+1
0000CB C8 0060             A   594    	PUSHX	_speed
0000CE D6 0000             A   595    	CALL	_motorsSet
0000D1 885EE5              A   596    	LDX	R5,-27(RR14)
0000D4 884EE6              A   597    	LDX	R4,-26(RR14)
0000D7 2F                  A   598    	ATM	
0000D8 09080FFF            A   599    	ADDX	4095,#8
0000DC 19000FFE            A   600    	ADCX	4094,#-0
                           A   601    ;   51			} else if(command == 's'){
                           A   602    .line 51
0000E0 8B 52               A   603    	JR	_1_L_9
0000E2                     A   604    _1_L_6:
0000E2 A9730004            A   605    	CPX	_command,#115
0000E6 EB 38               A   606    	JR	NE,_1_L_4
                           A   607    ;   52				speed = speed - 1;
                           A   608    .line 52
0000E8 09FF0007            A   609    	ADDX	_speed+1,#255
0000EC 19FF0006            A   610    	ADCX	_speed,#255
                           A   611    ;   53				command = 0;
                           A   612    .line 53
0000F0 E9000004            A   613    	LDX	_command,#-0
                           A   614    ;   54				motorsSet(speed, 0, loffset
                           A   615    .line 54
0000F4 1F70BB              A   616    	PUSH	#187
0000F7 1F7001              A   617    	PUSH	#1
0000FA 1F7095              A   618    	PUSH	#149
0000FD 1F7001              A   619    	PUSH	#1
000100 1F7000              A   620    	PUSH	#0
000103 1F7000              A   621    	PUSH	#0
000106 C8 0070             A   622    	PUSHX	_speed+1
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  13


PC     Object              I  Line    Source main.src
000109 C8 0060             A   623    	PUSHX	_speed
00010C D6 0000             A   624    	CALL	_motorsSet
00010F 885EE5              A   625    	LDX	R5,-27(RR14)
000112 884EE6              A   626    	LDX	R4,-26(RR14)
000115 2F                  A   627    	ATM	
000116 09080FFF            A   628    	ADDX	4095,#8
00011A 19000FFE            A   629    	ADCX	4094,#-0
                           A   630    ;   55			} else if(command == 'm'){
                           A   631    .line 55
00011E 8B 14               A   632    	JR	_1_L_9
000120                     A   633    _1_L_4:
000120 A96D0004            A   634    	CPX	_command,#109
000124 EB 0E               A   635    	JR	NE,_1_L_9
                           A   636    ;   56				tmp = mode(1);
                           A   637    .line 56
000126 1F7001              A   638    	PUSH	#1
000129 D6 0151             A   639    	CALL	_mode
00012C 885EE5              A   640    	LDX	R5,-27(RR14)
00012F 884EE6              A   641    	LDX	R4,-26(RR14)
000132 50E0                A   642    	POP	R0
                           A   643    ;   57			}
000134                     A   644    _1_L_9:
                           A   645    .line 57
                           A   646    ;   58	
                           A   647    ;   59			//Only poll the sensors every s
                           A   648    ;   60			if(i>15000){
                           A   649    .line 60
000134 A6E598              A   650    	CP	R5,#152
000137 1FA6E43A            A   651    	CPC	R4,#58
00013B 2D 00 36            A   652    	JR	LE,_1_L_10
                           A   653    ;   61				tmp = mode(0);
                           A   654    .line 61
00013E 1F7000              A   655    	PUSH	#0
000141 D6 0151             A   656    	CALL	_mode
000144 50E0                A   657    	POP	R0
                           A   658    ;   62				i=0;
                           A   659    .line 62
000146 B0E4                A   660    	CLR	R4
000148 B0E5                A   661    	CLR	R5
                           A   662    ;   63			}
                           A   663    ;   64		}
                           A   664    .line 64
00014A 8D 00 36            A   665    	JR	_1_L_10
                           A   666    ;   65	}
                           A   667    .line 65
00014D D6 0000             A   668    	CALL	__b_framereset
000150 AF                  A   669    	RET	
                           A   670    .endfunc "main",65,"_main"
                           A   671    	SEGMENT ROM_DATA
                           A   672    
                           A   673    
                           A   674    ;**************************** _mode ***********
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  14


PC     Object              I  Line    Source main.src
                           A   675    ;Name                         Addr/Register   S
                           A   676    ;_mems_read                          IMPORT  --
                           A   677    ;_printI2Cq                          STATIC    
                           A   678    ;_printMessage                       IMPORT  --
                           A   679    ;___print_sputch                     IMPORT  --
                           A   680    ;__u_stoa                            IMPORT  --
                           A   681    ;___print_out                        IMPORT    
                           A   682    ;_speed                              STATIC    
                           A   683    ;_1tmpSpeed                          STATIC    
                           A   684    ;_0m                                 STATIC    
                           A   685    ;inChar                              R15-25    
                           A   686    ;change                               R15+4    
                           A   687    
                           A   688    
                           A   689    ; Aggregate Stack Size: -25 (words)
                           A   690    
                           A   691    
                           A   692    	.FRAME _n_mode,?_n_mode,RDATA
                           A   693    	.FCALL _n__u_stoa
                           A   694    	.FCALL _n___print_sputch
                           A   695    	.FCALL _n_printMessage
                           A   696    	.FCALL _n_mems_read
                           A   697    	.FRAME _f_mode,?_f_mode,EDATA
                           A   698    	.FCALL _f__u_stoa
                           A   699    	.FCALL _f___print_sputch
                           A   700    	.FCALL _f_printMessage
                           A   701    	.FCALL _f_mems_read
                           A   702    	SEGMENT FAR_DATA
000009                     A   703    _0m:
000009 01                  A   704    	DB	1
00000A                     A   705    _1tmpSpeed:
00000A 00                  A   706    	DB	0
                           A   707    	SEGMENT main_TEXT
000151                     A   708    _mode:
                           A   709    .define "_mode"
                           A   710    .value _mode
                           A   711    .class 2
                           A   712    .type 66
                           A   713    .type 0
                           A   714    .endef
                           A   715    .begfunc "mode",68,"_mode"
                           A   716    .define "change"
                           A   717    .class 9
                           A   718    .value 4
                           A   719    .type 2
                           A   720    .type 0
                           A   721    .endef
                           A   722    ;   66	
                           A   723    ;   67	//Tells the other files and functions w
                           A   724    ;   68	char mode(char change){
                           A   725    .define "inChar"
                           A   726    .class 1
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  15


PC     Object              I  Line    Source main.src
                           A   727    .value -25
                           A   728    .dim 25
                           A   729    .type 98
                           A   730    .type 0
                           A   731    .endef
                           A   732    .define "m"
                           A   733    .alias "_0m"
                           A   734    .class 69
                           A   735    .value _0m
                           A   736    .type 2
                           A   737    .type 0
                           A   738    .endef
                           A   739    .define "tmpSpeed"
                           A   740    .alias "_1tmpSpeed"
                           A   741    .class 69
                           A   742    .value _1tmpSpeed
                           A   743    .type 2
                           A   744    .type 0
                           A   745    .endef
000151 5C19                A   746    	LD	R5,#25
000153 D6 0000             A   747    	CALL	__b_frameset0
                           A   748    ;   69		static char m = 1;
                           A   749    ;   70		char inChar[25];
                           A   750    ;   71		static char tmpSpeed = 0;
                           A   751    ;   72	
                           A   752    ;   73		if(m){
                           A   753    .line 73
000156 A9000009            A   754    	CPX	_0m,#-0
00015A 6B 5A               A   755    	JR	Z,_2_L_16
                           A   756    ;   74			if(tmpSpeed != speed){
                           A   757    .line 74
00015C 84100A              A   758    	LDX	R1,_1tmpSpeed
00015F E4E1E0              A   759    	LD	R0,R1
000162 90E0                A   760    	RL	R0
000164 3200                A   761    	SBC	R0,R0
000166 A8 007EE1           A   762    	CPX	R1,_speed+1
00016A 1FA8 006EE0         A   763    	CPCX	R0,_speed
00016F 6B 3B               A   764    	JR	Z,_2_L_14
                           A   765    ;   75				sprintf(inChar, "%d", speed
                           A   766    .line 75
000171 1CFF                A   767    	LD	R1,#255
000173 0CE7                A   768    	LD	R0,#231
000175 020F                A   769    	ADD	R0,R15
000177 121E                A   770    	ADC	R1,R14
000179 941000              A   771    	LDX	___print_out,R1
00017C 940001              A   772    	LDX	___print_out+1,R0
00017F C8 0070             A   773    	PUSHX	_speed+1
000182 C8 0060             A   774    	PUSHX	_speed
000185 D6 0000             A   775    	CALL	__u_stoa
000188 50E0                A   776    	POP	R0
00018A 50E0                A   777    	POP	R0
00018C 1F7000              A   778    	PUSH	#0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  16


PC     Object              I  Line    Source main.src
00018F D6 0000             A   779    	CALL	___print_sputch
000192 50E0                A   780    	POP	R0
                           A   781    ;   76				printMessage(inChar, 1);
                           A   782    .line 76
000194 1F7001              A   783    	PUSH	#1
000197 1CFF                A   784    	LD	R1,#255
000199 0CE7                A   785    	LD	R0,#231
00019B 020F                A   786    	ADD	R0,R15
00019D 121E                A   787    	ADC	R1,R14
00019F 70E0                A   788    	PUSH	R0
0001A1 70E1                A   789    	PUSH	R1
0001A3 D6 0000             A   790    	CALL	_printMessage
0001A6 50E0                A   791    	POP	R0
0001A8 50E0                A   792    	POP	R0
0001AA 50E0                A   793    	POP	R0
                           A   794    ;   77			}
0001AC                     A   795    _2_L_14:
                           A   796    .line 77
                           A   797    ;   78			tmpSpeed = speed;
                           A   798    .line 78
0001AC E8 00700A           A   799    	LDX	_1tmpSpeed,_speed+1
                           A   800    ;   79			printI2Cq = 0;
                           A   801    .line 79
0001B0 E9000008            A   802    	LDX	_printI2Cq,#-0
                           A   803    ;   80		} else {
                           A   804    .line 80
0001B4 8B 07               A   805    	JR	_2_L_19
0001B6                     A   806    _2_L_16:
                           A   807    ;   81			printI2Cq = 1;
                           A   808    .line 81
0001B6 E9010008            A   809    	LDX	_printI2Cq,#1
                           A   810    ;   82			mems_read();
                           A   811    .line 82
0001BA D6 0000             A   812    	CALL	_mems_read
                           A   813    ;   83		}
0001BD                     A   814    _2_L_19:
                           A   815    .line 83
                           A   816    ;   84	
                           A   817    ;   85		if(change){
                           A   818    .line 85
0001BD 880E04              A   819    	LDX	R0,4(RR14)
0001C0 4200                A   820    	OR	R0,R0
0001C2 6B 09               A   821    	JR	Z,_2_L_18
                           A   822    ;   86			m ^= 0x01;
                           A   823    .line 86
0001C4 B9010009            A   824    	XORX	_0m,#1
                           A   825    ;   87			return m;
                           A   826    .line 87
0001C8 840009              A   827    	LDX	R0,_0m
0001CB 8B 03               A   828    	JR	_2_L_20
                           A   829    ;   88		} else {
0001CD                     A   830    _2_L_18:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  17


PC     Object              I  Line    Source main.src
                           A   831    .line 88
                           A   832    ;   89			return m;
                           A   833    .line 89
0001CD 840009              A   834    	LDX	R0,_0m
                           A   835    ;   90		}
                           A   836    ;   91	
                           A   837    ;   92	}
0001D0                     A   838    _2_L_20:
                           A   839    .line 92
0001D0 D6 0000             A   840    	CALL	__b_framereset
0001D3 AF                  A   841    	RET	
                           A   842    .endfunc "mode",92,"_mode"
                           A   843    	SEGMENT ROM_DATA
                           A   844    
                           A   845    
                           A   846    ;**************************** _printI2CqF *****
                           A   847    ;Name                         Addr/Register   S
                           A   848    ;_printI2Cq                          STATIC    
                           A   849    
                           A   850    
                           A   851    ; Aggregate Stack Size: 0 (words)
                           A   852    
                           A   853    
                           A   854    	.FRAME _n_printI2CqF,?_n_printI2CqF,RDATA
                           A   855    	.FRAME _f_printI2CqF,?_f_printI2CqF,EDATA
                           A   856    	SEGMENT main_TEXT
0001D4                     A   857    _printI2CqF:
                           A   858    .define "_printI2CqF"
                           A   859    .value _printI2CqF
                           A   860    .class 2
                           A   861    .type 66
                           A   862    .type 0
                           A   863    .endef
                           A   864    .begfunc "printI2CqF",95,"_printI2CqF"
0001D4 D6 0000             A   865    	CALL	__b_frameset00
                           A   866    ;   93	
                           A   867    ;   94	
                           A   868    ;   95	char printI2CqF(void){
                           A   869    ;   96		return printI2Cq;
                           A   870    .line 96
0001D7 840008              A   871    	LDX	R0,_printI2Cq
                           A   872    ;   97	}
                           A   873    .line 97
0001DA D6 0000             A   874    	CALL	__b_framereset
0001DD AF                  A   875    	RET	
                           A   876    .endfunc "printI2CqF",97,"_printI2CqF"
                           A   877    	XREF _mems_read:ROM
                           A   878    	XREF _i2cInit:ROM
                           A   879    	XREF _commandF:ROM
                           A   880    	XREF _sendString:ROM
                           A   881    	XREF _init_coms:ROM
                           A   882    	XREF _motorsSet:ROM
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 25-Oct-16     19:32:09     page:  18


PC     Object              I  Line    Source main.src
                           A   883    	XREF _motorInit:ROM
                           A   884    	XREF __u_stoa:ROM
                           A   885    	XREF ___print_putromstring:ROM
                           A   886    	XREF ___print_sputch:ROM
                           A   887    	XREF ___print_send:ROM
                           A   888    	XREF ___print_out:EDATA
                           A   889    	XREF ___print_buff:EDATA
                           A   890    	XREF _printMessage:ROM
                           A   891    	XREF _signon:ROM
                           A   892    	XREF _init_LCD:ROM
                           A   893    	XREF __b_framereset:ROM
                           A   894    	XREF __b_frameset0:ROM
                           A   895    	XREF __b_frameset00:ROM
                           A   896    	XDEF _printI2CqF
                           A   897    	XDEF _mode
                           A   898    	XDEF _main
                           A   899    	XDEF _printI2Cq
                           A   900    	XDEF _speed
                           A   901    	XDEF _t1Ready
                           A   902    	XDEF _gyroZValue
                           A   903    	XDEF _gyroYValue
                           A   904    	XDEF _gyroXValue
                           A   905    	XDEF _accZValue
                           A   906    	XDEF _accYValue
                           A   907    	XDEF _accXValue
                           A   908    	XDEF _gyro_val
                           A   909    	XDEF _gyro_l
                           A   910    	XDEF _gyro_h
                           A   911    	XDEF _acc_x
                           A   912    	XDEF _acc_y
                           A   913    	XDEF _acc_yl
                           A   914    	XDEF _acc_yh
                           A   915    	XDEF _acc_xl
                           A   916    	XDEF _acc_xh
                           A   917    	XDEF _accRead
                           A   918    	XDEF _gyroRead
                           A   919    	XDEF _rxFlag
                           A   920    	XDEF _command
                           A   921    	XDEF _txFinished
                           A   922    	XDEF _string
                           A   923    	XDEF _inChar
                           A   924    	XDEF _RELOAD
                           A   925    	END


Errors: 0
Warnings: 0
Lines Assembled: 926
