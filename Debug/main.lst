Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog Z8 Encore! ANSI C Compiler Release 3.62
                           A     2    ; -nolocalcse -optsize -fastcall -const=RAM -mo
                           A     3    ; -nooptlink -regvar -reduceopt -debug -norevaa
                           A     4    ; -alias 
                           A     5    	DEFINE main_TEXT,SPACE=ROM
                           A     6    	FILE	"..\..\..\..\DOCUME~1\GITHUB\THIRDY
                           A     7    .debug "C"
                           A     8    	SEGMENT FAR_DATA
000000                     A     9    _RELOAD:
000000 03E8                A    10    	DW	1000
                           A    11    .define "RELOAD"
                           A    12    .alias "_RELOAD"
                           A    13    .class 69
                           A    14    .value _RELOAD
                           A    15    .type 3
                           A    16    .type 0
                           A    17    .endef
                           A    18    	SEGMENT main_TEXT
                           A    19    .begrec "fmt_type",16
                           A    20    .define "status"
                           A    21    .value 0
                           A    22    .class 8
                           A    23    .type 12
                           A    24    .type 0
                           A    25    .endef
                           A    26    .define "flags"
                           A    27    .value 1
                           A    28    .class 8
                           A    29    .type 12
                           A    30    .type 0
                           A    31    .endef
                           A    32    .define "size"
                           A    33    .value 2
                           A    34    .class 8
                           A    35    .type 2
                           A    36    .type 0
                           A    37    .endef
                           A    38    .define "chr"
                           A    39    .value 3
                           A    40    .class 8
                           A    41    .type 2
                           A    42    .type 0
                           A    43    .endef
                           A    44    .define "type"
                           A    45    .value 4
                           A    46    .class 8
                           A    47    .type 2
                           A    48    .type 0
                           A    49    .endef
                           A    50    .define "field_width"
                           A    51    .value 5
                           A    52    .class 8
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   2


PC     Object              I  Line    Source main.src
                           A    53    .type 2
                           A    54    .type 0
                           A    55    .endef
                           A    56    .define "precision"
                           A    57    .value 6
                           A    58    .class 8
                           A    59    .type 2
                           A    60    .type 0
                           A    61    .endef
                           A    62    .define "set_begin"
                           A    63    .value 7
                           A    64    .class 8
                           A    65    .type 162
                           A    66    .type 0
                           A    67    .endef
                           A    68    .define "set_end"
                           A    69    .value 9
                           A    70    .class 8
                           A    71    .type 162
                           A    72    .type 0
                           A    73    .endef
                           A    74    .define "pad_whole"
                           A    75    .value 11
                           A    76    .class 8
                           A    77    .type 12
                           A    78    .type 0
                           A    79    .endef
                           A    80    .define "pad_pre_fract"
                           A    81    .value 12
                           A    82    .class 8
                           A    83    .type 12
                           A    84    .type 0
                           A    85    .endef
                           A    86    .define "pad_post_fract"
                           A    87    .value 13
                           A    88    .class 8
                           A    89    .type 12
                           A    90    .type 0
                           A    91    .endef
                           A    92    .define "pad_at"
                           A    93    .value 14
                           A    94    .class 8
                           A    95    .type 162
                           A    96    .type 0
                           A    97    .endef
                           A    98    .endrec "fmt_type"
                           A    99    .begrec "flt_info",12
                           A   100    .define "flags"
                           A   101    .value 0
                           A   102    .class 8
                           A   103    .type 12
                           A   104    .type 0
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   3


PC     Object              I  Line    Source main.src
                           A   105    .endef
                           A   106    .define "exp"
                           A   107    .value 1
                           A   108    .class 8
                           A   109    .type 2
                           A   110    .type 0
                           A   111    .endef
                           A   112    .define "digits"
                           A   113    .value 2
                           A   114    .class 8
                           A   115    .dim 10
                           A   116    .type 108
                           A   117    .type 0
                           A   118    .endef
                           A   119    .endrec "flt_info"
                           A   120    	SEGMENT FAR_DATA
000002                     A   121    _inChar:
000002 00                  A   122    	DB	0
                           A   123    .define "inChar"
                           A   124    .alias "_inChar"
                           A   125    .class 69
                           A   126    .value _inChar
                           A   127    .type 2
                           A   128    .type 0
                           A   129    .endef
                           A   130    	SEGMENT FAR_BSS
000000                     A   131    _string:
000000                     A   132    	DS	25
                           A   133    .define "string"
                           A   134    .alias "_string"
                           A   135    .class 83
                           A   136    .value _string
                           A   137    .dim 25
                           A   138    .type 98
                           A   139    .type 0
                           A   140    .endef
                           A   141    	SEGMENT FAR_DATA
000003                     A   142    _txFinished:
000003 01                  A   143    	DB	1
                           A   144    .define "txFinished"
                           A   145    .alias "_txFinished"
                           A   146    .class 69
                           A   147    .value _txFinished
                           A   148    .type 2
                           A   149    .type 0
                           A   150    .endef
000004                     A   151    _command:
000004 00                  A   152    	DB	0
                           A   153    .define "command"
                           A   154    .alias "_command"
                           A   155    .class 69
                           A   156    .value _command
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   4


PC     Object              I  Line    Source main.src
                           A   157    .type 2
                           A   158    .type 0
                           A   159    .endef
000005                     A   160    _rxFlag:
000005 00                  A   161    	DB	0
                           A   162    .define "rxFlag"
                           A   163    .alias "_rxFlag"
                           A   164    .class 69
                           A   165    .value _rxFlag
                           A   166    .type 2
                           A   167    .type 0
                           A   168    .endef
                           A   169    	SEGMENT FAR_BSS
000019                     A   170    _acc_data_xl:
000019                     A   171    	DS	2*1
                           A   172    .define "acc_data_xl"
                           A   173    .alias "_acc_data_xl"
                           A   174    .class 83
                           A   175    .value _acc_data_xl
                           A   176    .type 172
                           A   177    .type 0
                           A   178    .endef
00001B                     A   179    _acc_data_xh:
00001B                     A   180    	DS	2*1
                           A   181    .define "acc_data_xh"
                           A   182    .alias "_acc_data_xh"
                           A   183    .class 83
                           A   184    .value _acc_data_xh
                           A   185    .type 172
                           A   186    .type 0
                           A   187    .endef
00001D                     A   188    _acc_data_yl:
00001D                     A   189    	DS	2*1
                           A   190    .define "acc_data_yl"
                           A   191    .alias "_acc_data_yl"
                           A   192    .class 83
                           A   193    .value _acc_data_yl
                           A   194    .type 172
                           A   195    .type 0
                           A   196    .endef
00001F                     A   197    _acc_data_yh:
00001F                     A   198    	DS	2*1
                           A   199    .define "acc_data_yh"
                           A   200    .alias "_acc_data_yh"
                           A   201    .class 83
                           A   202    .value _acc_data_yh
                           A   203    .type 172
                           A   204    .type 0
                           A   205    .endef
000021                     A   206    _gyro_data_l:
000021                     A   207    	DS	2*1
                           A   208    .define "gyro_data_l"
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   5


PC     Object              I  Line    Source main.src
                           A   209    .alias "_gyro_data_l"
                           A   210    .class 83
                           A   211    .value _gyro_data_l
                           A   212    .type 172
                           A   213    .type 0
                           A   214    .endef
000023                     A   215    _gyro_data_h:
000023                     A   216    	DS	2*1
                           A   217    .define "gyro_data_h"
                           A   218    .alias "_gyro_data_h"
                           A   219    .class 83
                           A   220    .value _gyro_data_h
                           A   221    .type 172
                           A   222    .type 0
                           A   223    .endef
000025                     A   224    _acc_xh:
000025                     A   225    	DS	1
                           A   226    .define "acc_xh"
                           A   227    .alias "_acc_xh"
                           A   228    .class 83
                           A   229    .value _acc_xh
                           A   230    .type 2
                           A   231    .type 0
                           A   232    .endef
000026                     A   233    _acc_xl:
000026                     A   234    	DS	1
                           A   235    .define "acc_xl"
                           A   236    .alias "_acc_xl"
                           A   237    .class 83
                           A   238    .value _acc_xl
                           A   239    .type 2
                           A   240    .type 0
                           A   241    .endef
000027                     A   242    _acc_yh:
000027                     A   243    	DS	1
                           A   244    .define "acc_yh"
                           A   245    .alias "_acc_yh"
                           A   246    .class 83
                           A   247    .value _acc_yh
                           A   248    .type 2
                           A   249    .type 0
                           A   250    .endef
000028                     A   251    _acc_yl:
000028                     A   252    	DS	1
                           A   253    .define "acc_yl"
                           A   254    .alias "_acc_yl"
                           A   255    .class 83
                           A   256    .value _acc_yl
                           A   257    .type 2
                           A   258    .type 0
                           A   259    .endef
000029                     A   260    _acc_y:
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   6


PC     Object              I  Line    Source main.src
000029                     A   261    	DS	1
                           A   262    .define "acc_y"
                           A   263    .alias "_acc_y"
                           A   264    .class 83
                           A   265    .value _acc_y
                           A   266    .type 2
                           A   267    .type 0
                           A   268    .endef
00002A                     A   269    _acc_x:
00002A                     A   270    	DS	1
                           A   271    .define "acc_x"
                           A   272    .alias "_acc_x"
                           A   273    .class 83
                           A   274    .value _acc_x
                           A   275    .type 2
                           A   276    .type 0
                           A   277    .endef
00002B                     A   278    _gyro_h:
00002B                     A   279    	DS	1
                           A   280    .define "gyro_h"
                           A   281    .alias "_gyro_h"
                           A   282    .class 83
                           A   283    .value _gyro_h
                           A   284    .type 2
                           A   285    .type 0
                           A   286    .endef
00002C                     A   287    _gyro_l:
00002C                     A   288    	DS	1
                           A   289    .define "gyro_l"
                           A   290    .alias "_gyro_l"
                           A   291    .class 83
                           A   292    .value _gyro_l
                           A   293    .type 2
                           A   294    .type 0
                           A   295    .endef
00002D                     A   296    _gyro_val:
00002D                     A   297    	DS	2*1
                           A   298    .define "gyro_val"
                           A   299    .alias "_gyro_val"
                           A   300    .class 83
                           A   301    .value _gyro_val
                           A   302    .type 3
                           A   303    .type 0
                           A   304    .endef
                           A   305    	SEGMENT ROM_DATA
                           A   306    
                           A   307    
                           A   308    ;**************************** _main ***********
                           A   309    ;Name                         Addr/Register   S
                           A   310    ;_commandF                           IMPORT  --
                           A   311    ;_gyro_read                          IMPORT  --
                           A   312    ;_command                            STATIC    
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   7


PC     Object              I  Line    Source main.src
                           A   313    ;_rxFlag                             STATIC    
                           A   314    ;_EI                                 IMPORT  --
                           A   315    ;_i2cInit                            IMPORT  --
                           A   316    ;_init_coms                          IMPORT  --
                           A   317    ;_signon                             IMPORT  --
                           A   318    ;_init_LCD                           IMPORT  --
                           A   319    ;_init_IO                            IMPORT  --
                           A   320    
                           A   321    
                           A   322    ; Aggregate Stack Size: 0 (words)
                           A   323    
                           A   324    
                           A   325    	.FRAME _n_main,?_n_main,RDATA
                           A   326    	.FCALL _n_init_IO
                           A   327    	.FCALL _n_init_LCD
                           A   328    	.FCALL _n_signon
                           A   329    	.FCALL _n_init_coms
                           A   330    	.FCALL _n_i2cInit
                           A   331    	.FCALL _n_gyro_read
                           A   332    	.FCALL _n_commandF
                           A   333    	.FRAME _f_main,?_f_main,EDATA
                           A   334    	.FCALL _f_init_IO
                           A   335    	.FCALL _f_init_LCD
                           A   336    	.FCALL _f_signon
                           A   337    	.FCALL _f_init_coms
                           A   338    	.FCALL _f_i2cInit
                           A   339    	.FCALL _f_gyro_read
                           A   340    	.FCALL _f_commandF
                           A   341    	SEGMENT main_TEXT
000000                     A   342    _main:
                           A   343    .define "_main"
                           A   344    .value _main
                           A   345    .class 2
                           A   346    .type 65
                           A   347    .type 0
                           A   348    .endef
                           A   349    .begfunc "main",12,"_main"
000000 D6 0000             A   350    	CALL	__b_frameset00
                           A   351    ;    1	#include <ez8.h>
                           A   352    ;    2	#include <delay.h>
                           A   353    ;    3	#include <STRING.H>
                           A   354    ;    4	#include <LCD.H>
                           A   355    ;    5	#include <STDIO.H>
                           A   356    ;    6	#include <motor.h>
                           A   357    ;    7	#include <uart.h>
                           A   358    ;    8	#include <i2c.h>
                           A   359    ;    9	
                           A   360    ;   10	void init_IO(void);
                           A   361    ;   11	
                           A   362    ;   12	void main(void){
                           A   363    ;   13		char reser[];
                           A   364    ;   14		char test[5];
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   8


PC     Object              I  Line    Source main.src
                           A   365    ;   15		init_IO();
                           A   366    .line 15
000003 D6 0034             A   367    	CALL	_init_IO
                           A   368    ;   16		init_LCD();
                           A   369    .line 16
000006 D6 0000             A   370    	CALL	_init_LCD
                           A   371    ;   17		signon();
                           A   372    .line 17
000009 D6 0000             A   373    	CALL	_signon
                           A   374    ;   18		// printMessage("This is a test", 1
                           A   375    ;   19		init_coms();
                           A   376    .line 19
00000C D6 0000             A   377    	CALL	_init_coms
                           A   378    ;   20		i2cInit();
                           A   379    .line 20
00000F D6 0000             A   380    	CALL	_i2cInit
                           A   381    ;   21		EI();
                           A   382    .line 21
000012 9F                  A   383    	EI
                           A   384    ;   22	
                           A   385    ;   23		rxFlag = 0;
                           A   386    .line 23
000013 E9000005            A   387    	LDX	_rxFlag,#-0
                           A   388    ;   24		command = 0;
                           A   389    .line 24
000017 E9000004            A   390    	LDX	_command,#-0
                           A   391    ;   25	
                           A   392    ;   26		// motorsSet(500, 0, 0, 0);
                           A   393    ;   27		// motor1Direction(MOTOR_STOP);
                           A   394    ;   28		// motor1Speed(1);
                           A   395    ;   29		//
                           A   396    ;   30		// motor2Direction(MOTOR_STOP);
                           A   397    ;   31		// motor2Speed(1);
                           A   398    ;   32	
                           A   399    ;   33		while(1){
00001B                     A   400    _1_L_1:
                           A   401    .line 33
                           A   402    ;   34			// motor1Direction(MOTOR_STOP);
                           A   403    ;   35			// motor1Speed(1);
                           A   404    ;   36			//
                           A   405    ;   37			// motor2Direction(MOTOR_STOP);
                           A   406    ;   38			// motor2Speed(1);
                           A   407    ;   39			gyro_read();
                           A   408    .line 39
00001B D6 0000             A   409    	CALL	_gyro_read
                           A   410    ;   40	// 		dly(500);
                           A   411    ;   41			// char inChar[25];
                           A   412    ;   42			command = commandF();
                           A   413    .line 42
00001E D6 0000             A   414    	CALL	_commandF
000021 940004              A   415    	LDX	_command,R0
                           A   416    ;   43			if(command != 0){
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:   9


PC     Object              I  Line    Source main.src
                           A   417    .line 43
000024 A9000004            A   418    	CPX	_command,#-0
000028 6B F1               A   419    	JR	Z,_1_L_1
                           A   420    ;   44				//  sprintf(inChar, "%c", c
                           A   421    ;   45				//  sendString(inChar);
                           A   422    ;   46				//  printMessage(inChar, 1)
                           A   423    ;   47				 command = 0;
                           A   424    .line 47
00002A E9000004            A   425    	LDX	_command,#-0
                           A   426    ;   48			}
                           A   427    ;   49		}
                           A   428    .line 49
00002E 8B EB               A   429    	JR	_1_L_1
                           A   430    ;   50	}
                           A   431    .line 50
000030 D6 0000             A   432    	CALL	__b_framereset
000033 AF                  A   433    	RET	
                           A   434    .endfunc "main",50,"_main"
                           A   435    	SEGMENT ROM_DATA
                           A   436    
                           A   437    
                           A   438    ;**************************** _init_IO ********
                           A   439    ;Name                         Addr/Register   S
                           A   440    
                           A   441    
                           A   442    ; Aggregate Stack Size: 0 (words)
                           A   443    
                           A   444    
                           A   445    	.FRAME _n_init_IO,?_n_init_IO,RDATA
                           A   446    	.FRAME _f_init_IO,?_f_init_IO,EDATA
                           A   447    	SEGMENT main_TEXT
000034                     A   448    _init_IO:
                           A   449    .define "_init_IO"
                           A   450    .value _init_IO
                           A   451    .class 2
                           A   452    .type 65
                           A   453    .type 0
                           A   454    .endef
                           A   455    .begfunc "init_IO",53,"_init_IO"
000034 D6 0000             A   456    	CALL	__b_frameset00
                           A   457    ;   51	
                           A   458    ;   52	
                           A   459    ;   53	void init_IO(void){
                           A   460    ;   54	
                           A   461    ;   55		//Initialise Port G to be entirely 
                           A   462    ;   56		// PGAF = 0x00;
                           A   463    ;   57		// PGDD = 0x00;
                           A   464    ;   58		// PGADDR = 0x00;
                           A   465    ;   59		// PGOUT = 0x00;
                           A   466    ;   60	
                           A   467    ;   61	}
                           A   468    .line 61
Zilog Z8 Encore! Macro Assembler Version 2.52 (11010702) 20-Oct-16     02:34:22     page:  10


PC     Object              I  Line    Source main.src
000037 D6 0000             A   469    	CALL	__b_framereset
00003A AF                  A   470    	RET	
                           A   471    .endfunc "init_IO",61,"_init_IO"
                           A   472    	XREF _gyro_read:ROM
                           A   473    	XREF _i2cInit:ROM
                           A   474    	XREF _commandF:ROM
                           A   475    	XREF _init_coms:ROM
                           A   476    	XREF _signon:ROM
                           A   477    	XREF _init_LCD:ROM
                           A   478    	XREF __b_framereset:ROM
                           A   479    	XREF __b_frameset00:ROM
                           A   480    	XDEF _init_IO
                           A   481    	XDEF _main
                           A   482    	XDEF _gyro_val
                           A   483    	XDEF _gyro_l
                           A   484    	XDEF _gyro_h
                           A   485    	XDEF _acc_x
                           A   486    	XDEF _acc_y
                           A   487    	XDEF _acc_yl
                           A   488    	XDEF _acc_yh
                           A   489    	XDEF _acc_xl
                           A   490    	XDEF _acc_xh
                           A   491    	XDEF _gyro_data_h
                           A   492    	XDEF _gyro_data_l
                           A   493    	XDEF _acc_data_yh
                           A   494    	XDEF _acc_data_yl
                           A   495    	XDEF _acc_data_xh
                           A   496    	XDEF _acc_data_xl
                           A   497    	XDEF _rxFlag
                           A   498    	XDEF _command
                           A   499    	XDEF _txFinished
                           A   500    	XDEF _string
                           A   501    	XDEF _inChar
                           A   502    	XDEF _RELOAD
                           A   503    	END


Errors: 0
Warnings: 0
Lines Assembled: 504
